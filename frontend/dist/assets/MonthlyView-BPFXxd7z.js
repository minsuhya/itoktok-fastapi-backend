import{N as A,y as d,z as J,o as p,d as g,e as s,q as b,g as k,t as u,F as Y,A as I,B as q,M as E,O as H,w as h,j as P,H as W}from"./index-Ck04C7we.js";import{_ as Z,a as G,g as Q,r as R,b as U,c as X,d as K,e as ee,f as te}from"./DailyViewSliding-CjgDQLJB.js";import"./client-Bx4uSElS.js";const se=s("section",null,[s("div",{class:"w-full sm:container"},[s("div",{class:"border-black border-l-[5px] pl-5"},[s("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"월간 일정")])])],-1),le={class:"max-w-full mx-auto p-4"},oe={class:"flex justify-between items-center mb-4"},ne={class:"flex items-center space-x-2"},ae={class:"text-xl font-semibold"},re={class:"flex space-x-2 text-sm font-semibold"},ce=s("span",null,"Today",-1),ie=[ce],ue={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},de=q('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),he=["onClick"],ve=["onClick"],fe=["onClick"],me={class:"inline-block"},be={class:"ml-auto inline-block"},pe=["onClick"],ge=s("span",{class:"inline-block"},"상담사",-1),_e={class:"ml-auto inline-block"},we=["onClick"],ke=s("span",{class:"inline-block"},"상담시간",-1),xe={class:"ml-auto inline-block"},ye=["onClick"],Ce=["onClick"],Me=["onClick"],De=["onClick"],Ne={__name:"MonthlyView",setup(Se){const i=A({}),x=d(!1),y=d(!1),M=d(""),D=d(""),v=d(""),_=(e,t,n)=>{n.stopPropagation(),i[e]||(i[e]={}),i[e][t]=!i[e][t],Object.keys(i).forEach(l=>{Object.keys(i[l]).forEach(a=>{l!==e&&a!==t&&(i[l][a]=!1)})});const o=n.target.closest(".relative");if(o){const l=o.parentElement.children;for(let a of l)a!==o&&(a.style.display=i[e][t]?"none":"")}},C=()=>{x.value=!x.value,x.value||(M.value="",D.value="",v.value=""),f(c.value.currentYear,c.value.currentMonth)},N=()=>{y.value=!y.value,y.value||(v.value=""),f(c.value.currentYear,c.value.currentMonth)},z=e=>{v.value=e,N()},B=e=>{v.value=e,C()},j=(e,t,n)=>{M.value=String(e),D.value=String(t),v.value=n,C()},L=async e=>{if(confirm("해당 일정을 삭제하시겠습니까?")&&e)try{await te(e),f(c.value.currentYear,c.value.currentMonth)}catch(t){console.error("Error deleting schedule:",t)}},S=["January","February","March","April","May","June","July","August","September","October","November","December"],V=d([]),c=d({}),$=d(""),O=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${o}`};$.value=O(new Date),console.log("today:",$.value);const T=(e,t)=>{const n=new Date(e,t,1),o=n.getFullYear(),l=n.getMonth()+1;let a=o,m=l-1;m===0&&(m=12,a-=1);let w=o,r=l+1;return r===13&&(r=1,w+=1),console.log("currentYear:",o,"currentMonth:",l),{currentDate:n,currentYear:o,currentMonth:l,currentMonthName:S[l-1],prevYear:a,prevMonth:m,prevMonthName:S[m-1],nextYear:w,nextMonth:r,nextMonthName:S[r-1]}},f=async(e,t)=>{e||(e=new Date().getFullYear()),t||(t=new Date().getMonth()+1);try{const n=await Q(e,t);V.value=n.data,F(e,t-1),console.log("schedule_data:",V.value)}catch(n){console.error("Error fetching monthly schedule data:",n)}},F=(e,t)=>{c.value=T(e,t)};return J(()=>{const e=new Date().getFullYear(),t=new Date().getMonth();F(e,t),f(c.value.currentYear,c.value.currentMonth)}),(e,t)=>(p(),g(Y,null,[se,s("div",le,[s("div",oe,[s("div",ne,[s("button",{class:"p-2 rounded-full font-semibold",onClick:t[0]||(t[0]=n=>f(c.value.prevYear,c.value.prevMonth))},[b(k(R),{class:"w-6 h-6"})]),s("h2",ae,u(c.value.currentMonthName)+" "+u(c.value.currentYear),1),s("button",{class:"p-2 rounded-full font-semibold",onClick:t[1]||(t[1]=n=>f(c.value.nextYear,c.value.nextMonth))},[b(k(U),{class:"w-6 h-6"})])]),s("div",re,[s("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:t[2]||(t[2]=n=>f())},ie),s("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:C}," 상담 등록 ")])]),s("div",ue,[de,(p(!0),g(Y,null,I(V.value,(n,o)=>(p(),g("div",{class:"bg-white h-32 p-2",key:o,onClick:l=>B(o)},[s("span",{class:E({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":o===$.value})},u(o.split("-")[2]),3),(p(!0),g(Y,null,I(n.slice(0,2),(l,a)=>{var m,w;return p(),g("div",{class:E(["relative flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(m=i[o])!=null&&m[a]?"scale-105 h-auto min-h-6 w-full pt-1":"scale-100 h-6"]]),key:a,style:H({backgroundColor:(w=i[o])!=null&&w[a]?"rgba(255, 255, 255, 1)":l.teacher_usercolor}),onClick:h(r=>_(o,a,r),["stop"])},[s("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:h(r=>_(o,a,r),["stop"])},[s("span",me,"["+u(l.client_name)+"] "+u(l.teacher_expertise),1),s("span",be,u(l.schedule_time),1)],8,fe),s("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:h(r=>_(o,a,r),["stop"])},[ge,s("span",_e,u(l.teacher_fullname),1)],8,pe),s("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:h(r=>_(o,a,r),["stop"])},[ke,s("span",xe,u(l.start_time)+" ~ "+u(l.finish_time),1)],8,we),s("div",{class:"flex justify-center items-center px-1 h-full w-full",onClick:h(r=>_(o,a,r),["stop"])},[s("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:h(r=>j(l.schedule_id,l.id,l.schedule_date),["stop"])},[b(k(X),{class:"w-4 h-4"})],8,Ce),s("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:h(r=>L(l.id),["stop"])},[b(k(K),{class:"w-4 h-4"})],8,Me)],8,ye)],14,ve)}),128)),n.length>2?(p(),g("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:h(l=>z(o),["stop"])},[b(k(ee),{class:"w-4 h-4"}),P(" "+u(n.length-2)+" more ",1)],8,De)):W("",!0)],8,he))),128))]),b(Z,{isVisible:x.value,scheduleId:M.value,scheduleListId:D.value,scheduleDate:v.value,onClose:C,class:"z-20"},null,8,["isVisible","scheduleId","scheduleListId","scheduleDate"]),b(G,{isDailyViewSlidingVisible:y.value,scheduleDate:v.value,onClose:N,onClickCalendarSchedule:j,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64))}};export{Ne as default};
