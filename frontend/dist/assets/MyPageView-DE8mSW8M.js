import{s as h,_ as E,i as j,u as S,J as g,K as q,o as $,c as C,b as e,j as t,k as O,e as s,F as R,t as M,g as x,x as d,E as c,y as F,C as B,D as N}from"./index-ROuoOsid.js";import{c as z,a as m,b as D}from"./index.esm-M1_3KTZr.js";import{a as P,u as J}from"./user-DWzttYBR.js";const K=async u=>{try{return(await h.get(`/center/info/${u}`)).data}catch(_){throw console.error("Error reading center info:",_),_}},T=async(u,_)=>{try{return(await h.put(`/center/info/${u}`,_)).data}catch(o){throw console.error("Error updating center info:",o),o}},a=u=>(B("data-v-be69ef6c"),u=u(),N(),u),A=a(()=>e("section",null,[e("div",{class:"w-full sm:container"},[e("div",{class:"border-black border-l-[5px] pl-5"},[e("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"내정보")])])],-1)),G={class:"relative overflow-x-auto shadow-md sm:rounded-lg border bg-white"},H={class:"container mx-auto p-4"},L={class:"text-2xl font-bold mb-4"},Q={class:"font-bold text-2xl text-sky-700"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"mb-4 col-span-2 w-1/2"},Y=a(()=>e("label",{class:"block font-semibold text-gray-700"},[x("이메일 "),e("span",{class:"text-red-500"},"*")],-1)),Z={class:"mb-4"},ee=a(()=>e("label",{class:"block font-semibold text-gray-700"},"비밀번호 ",-1)),se={class:"mb-4"},te=a(()=>e("label",{class:"block font-semibold text-gray-700"},"비밀번호 확인 ",-1)),re={class:"mb-4"},oe=a(()=>e("label",{class:"block font-semibold text-gray-700"},[x("이름 "),e("span",{class:"text-red-500"},"*")],-1)),ae={class:"mb-4"},ne=a(()=>e("label",{class:"block font-semibold text-gray-700"},[x("휴대폰번호 "),e("span",{class:"text-red-500"},"*")],-1)),le={class:"mb-4"},de=a(()=>e("label",{class:"block font-semibold text-gray-700"},"전화번호",-1)),ce={class:"mb-4"},ie=a(()=>e("label",{class:"block font-semibold text-gray-700"},"생년월일",-1)),me={class:"mb-4"},ue=a(()=>e("label",{class:"block font-semibold text-gray-700"},"주소",-1)),_e={class:"mb-4"},be=a(()=>e("label",{class:"block font-semibold text-gray-700"},"주소 상세",-1)),pe=a(()=>e("h1",{class:"text-2xl font-bold mb-4"},"센터 정보",-1)),fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"mb-4"},ge=a(()=>e("label",{class:"block font-semibold text-gray-700"},[x("센터명 "),e("span",{class:"text-red-500"},"*")],-1)),he={class:"mb-4"},ye=a(()=>e("label",{class:"block font-semibold text-gray-700"},[x("센터 전화번호 "),e("span",{class:"text-red-500"},"*")],-1)),we={class:"mb-4"},ve=a(()=>e("label",{class:"block font-semibold text-gray-700"},"센터 한줄소개",-1)),ke={class:"mb-4"},Ve=a(()=>e("label",{class:"block font-semibold text-gray-700"},"센터소개",-1)),Ue={class:"mb-4"},Ie=a(()=>e("label",{class:"block font-semibold text-gray-700"},"전문분야",-1)),Ee={class:"mb-4"},je=a(()=>e("label",{class:"block font-semibold text-gray-700"},"센터주소",-1)),Se=a(()=>e("div",{class:"mt-6 flex items-center justify-center gap-x-6"},[e("button",{class:"w-full rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Save ")],-1)),qe={__name:"MyPageView",setup(u){const _=j("showModal"),o=S(),f=g({username:o.user.username,password:"",email:o.user.email,full_name:o.user.full_name,birth_date:o.user.birth_date,center_username:o.user.center_username,phone_number:o.user.phone_number,hp_number:o.user.hp_number,address:o.user.address,address_extra:o.user.address_extra,zip_code:o.user.zip_code,user_type:o.user.user_type,is_active:o.user.is_active,is_superuser:o.user.is_superuser}),n=g({username:o.user.username,center_name:"",center_summary:"",center_introduce:"",center_export:"",center_addr:"",center_tel:""}),y=g({...f,...n}),w=z({password:m(),password_confirm:m().when("password",{is:r=>r&&r.length>0,then:()=>m().oneOf([D("password")],"비밀번호가 일치하지 않습니다.").required("비밀번호 확인을 입력해주세요."),otherwise:()=>m().notRequired()}),email:m().required("이메일을 입력해주세요.").email("올바른 이메일을 입력하세요."),full_name:m().required("이름을 입력해주세요."),hp_number:m().required("휴대폰번호를 입력해주세요.").test("is-valid-phone","올바른 휴대폰번호를 입력하세요.",r=>/^(010|011)-\d{3,4}-\d{4}$/.test(r)),phone_number:m().required("전화번호를 입력해주세요.").test("is-valid-phone","올바른 전화번호를 입력하세요.",r=>/^\d{2,3}-\d{3,4}-\d{4}$/.test(r)),center_name:m().required("센터명을 입력해주세요."),center_tel:m().required("센터 전화번호를 입력해주세요.").test("is-valid-phone","올바른 전화번호를 입력하세요.",r=>/^\d{2,3}-\d{3,4}-\d{4}$/.test(r))}),v=async()=>{try{const r=await P(o.user.id);o.setUserInfo(r),Object.assign(f,r)}catch(r){console.error("Error fetching user:",r)}},k=async()=>{try{await J(o.user.id,f),o.setUserInfo(f)}catch(r){console.error("Error updating user:",r)}},V=async()=>{try{const r=await K(o.user.username);Object.assign(n,r)}catch(r){console.error("Error fetching center info:",r)}},U=async()=>{try{await T(o.user.username,n)}catch(r){console.error("Error updating center info:",r)}},I=async r=>{const l=Object.keys(f).reduce((b,p)=>(p in r&&(b[p]=r[p]),b),{});Object.assign(f,l);const i=Object.keys(n).reduce((b,p)=>(p in r&&(b[p]=r[p]),b),{});Object.assign(n,i);try{await k(),await U(),_("사용자 정보가 수정되었습니다.")}catch(b){_("사용자 정보 수정 중 오류가 발생했습니다."),console.error("Error updating user data:",b)}};return q(()=>{v(),V()}),(r,l)=>($(),C(R,null,[A,e("div",G,[e("div",H,[t(s(F),{"validation-schema":s(w),"initial-values":y,onSubmit:I},{default:O(()=>[e("h1",L,[e("span",Q,M(s(o).user.username),1),x(" 계정 정보 ")]),e("div",W,[e("div",X,[Y,t(s(d),{name:"email",type:"email",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"email",class:"text-red-500"})]),e("div",Z,[ee,t(s(d),{name:"password",type:"password",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"password",class:"text-red-500"})]),e("div",se,[te,t(s(d),{name:"password_confirm",type:"password",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"password_confirm",class:"text-red-500"})]),e("div",re,[oe,t(s(d),{name:"full_name",type:"text",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"full_name",class:"text-red-500"})]),e("div",ae,[ne,t(s(d),{name:"hp_number",type:"text",class:"mt-1 block w-full rounded-lg border-gray-400",placeholder:"000-0000-0000"}),t(s(c),{name:"hp_number",class:"text-red-500"})]),e("div",le,[de,t(s(d),{name:"phone_number",type:"text",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"phone_number",class:"text-red-500"})]),e("div",ce,[ie,t(s(d),{name:"birth_date",type:"date",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"birth_date",class:"text-red-500"})]),e("div",me,[ue,t(s(d),{name:"address",type:"text",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"address",class:"text-red-500"})]),e("div",_e,[be,t(s(d),{name:"address_extra",type:"text",class:"mt-1 block w-full rounded-lg border-gray-400"}),t(s(c),{name:"address_extra",class:"text-red-500"})])]),pe,e("div",fe,[e("div",xe,[ge,t(s(d),{name:"center_name",type:"text",modelValue:n.center_name,"onUpdate:modelValue":l[0]||(l[0]=i=>n.center_name=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"]),t(s(c),{name:"center_name",class:"text-red-500"})]),e("div",he,[ye,t(s(d),{name:"center_tel",type:"text",modelValue:n.center_tel,"onUpdate:modelValue":l[1]||(l[1]=i=>n.center_tel=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"]),t(s(c),{name:"center_tel",class:"text-red-500"})]),e("div",we,[ve,t(s(d),{name:"center_summary",type:"text",modelValue:n.center_summary,"onUpdate:modelValue":l[2]||(l[2]=i=>n.center_summary=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"]),t(s(c),{name:"center_summary",class:"text-red-500"})]),e("div",ke,[Ve,t(s(d),{name:"center_introduce",as:"textarea",modelValue:n.center_introduce,"onUpdate:modelValue":l[3]||(l[3]=i=>n.center_introduce=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"]),t(s(c),{name:"center_introduce",class:"text-red-500"})]),e("div",Ue,[Ie,t(s(d),{name:"center_export",type:"text",modelValue:n.center_export,"onUpdate:modelValue":l[4]||(l[4]=i=>n.center_export=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"])]),t(s(c),{name:"center_export",class:"text-red-500"}),e("div",Ee,[je,t(s(d),{name:"center_addr",type:"text",modelValue:n.center_addr,"onUpdate:modelValue":l[5]||(l[5]=i=>n.center_addr=i),class:"mt-1 block w-full rounded-lg border-gray-400"},null,8,["modelValue"]),t(s(c),{name:"center_addr",class:"text-red-500"})])]),Se]),_:1},8,["validation-schema","initial-values"])])])],64))}},Re=E(qe,[["__scopeId","data-v-be69ef6c"]]);export{Re as default};
