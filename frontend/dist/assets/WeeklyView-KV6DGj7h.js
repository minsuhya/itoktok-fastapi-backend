import{N as Q,y as v,z as R,o as d,d as u,e as l,w as $,q as p,g as f,t as c,F as D,A as x,j as L,M as U,O as X,H as ee}from"./index-B3wxABeO.js";import{_ as te,a as se,h as le,r as ae,b as oe,c as ne,d as re,e as ce,f as ie}from"./DailyViewSliding-BtwTgSR3.js";import"./client-B4fmRRBY.js";const de=l("section",null,[l("div",{class:"w-full sm:container"},[l("div",{class:"border-black border-l-[5px] pl-5"},[l("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"주간 일정")])])],-1),ue={class:"flex justify-between items-center mb-4"},be={class:"flex items-center space-x-2"},he={class:"text-xl font-semibold"},ve={class:"flex space-x-2 text-sm font-semibold"},fe=l("span",null,"Today",-1),ge=[fe],ke=l("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md"},"상담 등록",-1),pe={class:"not-prose relative bg-slate-50 rounded-xl overflow-hidden w-full mx-auto dark:bg-slate-800/25"},we={class:"relative rounded-xl overflow-auto"},De={class:"mx-4 my-4 box-content bg-white dark:bg-slate-800 shadow-xl overflow-hidden"},me={class:"grid grid-cols-[70px,repeat(7,1fr)] grid-rows-1 h-auto"},xe=l("div",{class:"row-start-[1] col-start-[1] sticky top-0 bg-white dark:bg-gradient-to-b dark:from-slate-600 dark:to-slate-700 border-slate-100 dark:border-black/10 bg-clip-padding text-slate-900 dark:text-slate-200 border-b text-sm font-medium py-2"},null,-1),_e={class:"sm:inline-block rounded-full bg-slate-400 w-5 h-5 text-white font-semibold"},ye={class:"grid grid-cols-[70px,repeat(7,1fr)] grid-rows-1 max-h-full h-full"},Se={class:"flex-row h-full"},Ce=["onClick"],$e=["onClick"],Me={class:"flex justify-between items-center px-1 h-full w-full"},Ve={class:"inline-block whitespace-nowrap overflow-hidden text-ellipsis"},Te={class:"ml-auto inline-block"},Ee={class:"flex justify-between items-center px-1 h-full w-full"},Fe=l("span",{class:"inline-block"},"상담사",-1),Ye={class:"ml-auto inline-block"},je={class:"flex justify-between items-center px-1 h-full w-full"},Ne=l("span",{class:"inline-block"},"상담시간",-1),We={class:"ml-auto inline-block"},ze={class:"flex justify-center items-center px-1 h-full w-full"},Be=["onClick"],Le=["onClick"],He=["onClick"],Ae=l("div",{class:"absolute inset-0 pointer-events-none border border-black/5 rounded-xl dark:border-white/5"},null,-1),Ze={__name:"WeeklyView",setup(Ie){const b=Q({}),_=v(!1),y=v(!1),M=v(""),Y=v(""),h=v(""),w=v(""),V=v([]),o=v({}),T=new Date,H=["Mon","Tue","Web","Thu","Fri","Sat","Sun"],A=(e,t,s,a)=>{a.stopPropagation(),b[e]||(b[e]={}),b[e][t]||(b[e][t]={}),b[e][t][s]=!b[e][t][s]};function I(e){return e<10?`0${e}:00`:`${e}:00`}const S=e=>{const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`},O=e=>{const t=[];for(let s=0;s<7;s++){const a=new Date(e);a.setDate(e.getDate()+s);const i=a.getDay()-1;t.push({date:S(a),day:H[i===-1?6:i]})}return t},E=()=>{_.value=!_.value,_.value||(M.value="",h.value="",w.value="",g(o.value.currentYear,o.value.currentMonth,o.value.currentDay))},j=()=>{y.value=!y.value,y.value||(h.value="",w.value="",g(o.value.currentYear,o.value.currentMonth,o.value.currentDay))},q=e=>{h.value=e,j()},P=(e,t)=>{console.log("clickCalendarTime:",e,t),h.value=e,w.value=t,E()},N=(e,t,s)=>{M.value=String(e),Y.value=String(t),h.value=s,E()},Z=async e=>{if(confirm("해당 일정을 삭제하시겠습니까?")&&e)try{await ie(e),g(o.value.currentYear,o.value.currentMonth)}catch(t){console.error("Error deleting schedule:",t)}},g=async(e,t,s)=>{e=e||new Date().getFullYear(),t=t||new Date().getMonth()+1,s=s||new Date().getDate(),console.log("year:",e,"month:",t,"day:",s);try{const a=await le(e,t,s);V.value=a.data,C(e,t-1,s),console.log("schedule_data:",V.value)}catch(a){console.error("Error fetching monthly schedule data:",a)}},G=(e,t,s)=>{const a=new Date(e,t,s);console.log("date:",a);let i=a.getDay();i=i===0?6:i-1;const r=new Date(a);r.setDate(a.getDate()-i);const n=new Date(r);n.setDate(r.getDate()+6);const k=new Date(r);k.setDate(r.getDate()-1);const m=new Date(n);return m.setDate(n.getDate()+1),{currentYear:e,currentMonth:t+1,currentDay:s,weekStartDate:r,weekEndDate:n,prevStartDate:k,nextEndDate:m}},J=()=>{const e=o.value.prevStartDate.getFullYear(),t=o.value.prevStartDate.getMonth()+1,s=o.value.prevStartDate.getDate();C(e,t,s),g(e,t,s)},K=()=>{const e=o.value.nextEndDate.getFullYear(),t=o.value.nextEndDate.getMonth()+1,s=o.value.nextEndDate.getDate();C(e,t,s),g(e,t,s)},C=(e,t,s)=>{o.value=G(e,t,s),o.value.weekDates=O(o.value.weekStartDate),console.log("set Date Info - currentDateInfo:",o.value)};return R(()=>{h.value=S(new Date),w.value=I(new Date().getHours());const e=new Date().getFullYear(),t=new Date().getMonth()+1,s=new Date().getDate();C(e,t,s),g(e,t,s)}),(e,t)=>(d(),u(D,null,[de,l("div",ue,[l("div",be,[l("button",{onClick:t[0]||(t[0]=$(s=>J(),["stop"])),class:"p-2 rounded-full font-semibold"},[p(f(ae),{class:"w-6 h-6"})]),l("h2",he,c(S(o.value.weekStartDate))+" ~ "+c(S(o.value.weekEndDate)),1),l("button",{onClick:t[1]||(t[1]=$(s=>K(),["stop"])),class:"p-2 rounded-full font-semibold"},[p(f(oe),{class:"w-6 h-6"})])]),l("div",ve,[l("button",{onClick:t[2]||(t[2]=s=>g(f(T).getFullYear(),f(T).getMonth()+1,f(T).getDate())),class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center"},ge),ke])]),l("div",pe,[l("div",we,[l("div",De,[l("div",me,[xe,(d(!0),u(D,null,x(o.value.weekDates,(s,a)=>(d(),u("div",{key:a,class:"row-start-[1] col-start-[{{ index + 2 }}] sticky top-0 bg-white dark:bg-gradient-to-b dark:from-slate-600 dark:to-slate-700 border-slate-100 dark:border-black/10 bg-clip-padding text-slate-900 dark:text-slate-200 border-b text-sm font-medium py-2 text-center"},[l("span",_e,c(s.date.split("-")[2]),1),L(" "+c(s.day),1)]))),128))]),l("div",ye,[l("div",Se,[(d(),u(D,null,x(11,s=>l("div",{key:s,class:"h-[90px] border-slate-100 dark:border-slate-200/5 border-r text-xs p-1.5 text-right text-slate-400 uppercase sticky left-0 bg-white dark:bg-slate-800 font-medium"},c(s+7)+" AM ",1)),64))]),(d(!0),u(D,null,x(V.value,(s,a)=>(d(),u("div",{key:a,class:"flex-row h-full items-center text-center border-slate-100 dark:border-slate-200/5 border-r divide-y divide-slate-100 dark:divide-slate-200"},[(d(!0),u(D,null,x(s,(i,r)=>(d(),u("div",{key:r,onClick:n=>P(a,r),class:"h-[90px] text-xs text-slate-400 font-medium p-1.5"},[(d(!0),u(D,null,x(i.slice(0,2),(n,k)=>{var m,W,z,B;return d(),u("div",{class:U(["flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(W=(m=b[a])==null?void 0:m[r])!=null&&W[k]?"scale-105 h-auto min-h-6 w-full pt-1 border-blue-700":"scale-100 h-6"]]),key:k,style:X({backgroundColor:(B=(z=b[a])==null?void 0:z[r])!=null&&B[k]?"rgba(255, 255, 255, 1)":n.teacher_usercolor}),onClick:F=>A(a,r,k,F)},[l("div",Me,[l("span",Ve,"["+c(n.client_name)+"] "+c(n.teacher_expertise),1),l("span",Te,c(n.schedule_time),1)]),l("div",Ee,[Fe,l("span",Ye,c(n.teacher_fullname),1)]),l("div",je,[Ne,l("span",We,c(n.start_time)+" ~ "+c(n.finish_time),1)]),l("div",ze,[l("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:$(F=>N(n.schedule_id,n.id,n.schedule_date),["stop"])},[p(f(ne),{class:"w-4 h-4"})],8,Be),l("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:F=>Z(n.id)},[p(f(re),{class:"w-4 h-4"})],8,Le)])],14,$e)}),128)),i.length>2?(d(),u("div",{key:0,class:"flex items-center justify-center ml-auto w-6 h-5 text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 bg-blue-400/20",onClick:$(n=>q(a),["stop"])},[p(f(ce),{class:"w-5 h-4"}),L(" "+c(i.length-2),1)],8,He)):ee("",!0)],8,Ce))),128))]))),128))])])]),Ae,p(te,{isVisible:_.value,scheduleId:M.value,scheduleListId:Y.value,scheduleDate:h.value,scheduleTime:w.value,onClose:E,class:"z-20"},null,8,["isVisible","scheduleId","scheduleListId","scheduleDate","scheduleTime"]),p(se,{isDailyViewSlidingVisible:y.value,scheduleDate:h.value,scheduleTime:w.value,onClose:j,onClickCalendarSchedule:N,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate","scheduleTime"])])],64))}};export{Ze as default};
