import{o as c,d,e,z as P,u as R,i as W,q as g,c as X,a as B,M as L,s as G,N as K,O as J,J as H,n as a,p as Z,g as i,A as I,f as ee,v as te,F as N,x as E,t as m,E as F,B as se,j as T,y as le,w as oe,C as ne}from"./index-DIc3l8qW.js";import{f as ae}from"./user-DmLmzRlf.js";import{s as ie}from"./client-fUZickzX.js";import{r as re,a as ce}from"./ChevronRightIcon-CzDvCfSN.js";function Q(u,v){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z"})])}function de(u,v){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}function ue(u,v){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})])}const me=async u=>P.post("/schedules",u),he=async u=>P.get(`/schedules/${u}`),be=async(u,v)=>P.get(`/schedules/calendar/${u}/${v}`),fe=async(u,v,Y)=>P.get(`/schedules/calendar/daily/${u}/${v}/${Y}`),_e={className:"w-full bg-neutral-50 shadow-lg rounded-lg p-6"},ge={className:"border-b pb-2 mb-4"},ve=e("h2",{class:"font-title font-bold"},"상담일정",-1),pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),xe=[pe],we={class:"grid gap-4"},ye={class:"mb-4"},ke=e("label",{for:"client-search",class:"block text-sm font-medium text-gray-700"},"내담자를 선택하세요.",-1),$e={class:"relative mt-1"},Ve={class:"absolute inset-y-0 right-0 flex items-center pr-3"},Me={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto"},De=["onClick"],Ce={key:1,class:"absolute mt-2 text-sm text-gray-500"},Se={class:"grid grid-cols-1 gap-4"},je={class:"mb-4"},Ie=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("상담사 "),e("span",{class:"text-red-500"},"*")],-1),Ne={class:"grid grid-cols-2 gap-4"},Ae=e("label",{class:"block mb-1 text-gray-700"},[T("내담자 이름 "),e("span",{class:"text-red-500"},"*")],-1),Ue=e("label",{class:"block mb-1 text-gray-700"},[T("내담자 휴대전화번호 "),e("span",{class:"text-red-500"},"*")],-1),Fe={class:"mb-4"},Ye=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("일정제목 "),e("span",{class:"text-red-500"},"*")],-1),Be={class:"grid grid-cols-2 gap-4"},Ee={class:"mb-4"},Te=e("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("일정시작일 "),e("span",{class:"text-red-500"},"*")],-1),qe={class:"mb-4"},ze=e("label",{for:"finish_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("일정종료일 "),e("span",{class:"text-red-500"},"*")],-1),He={class:"grid grid-cols-2 gap-4"},Oe={class:"mb-4"},Pe=e("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("시작시간 "),e("span",{class:"text-red-500"},"*")],-1),Ze=["value"],Je={class:"mb-4"},Le=e("label",{for:"finish_time",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[T("종료시간 "),e("span",{class:"text-red-500"},"*")],-1),We=["value"],Ge=e("label",{class:"block mb-1 text-gray-700"},"메모",-1),Ke=e("div",{class:"text-right text-gray-500 text-sm"},"0 / 100",-1),Qe=e("button",{type:"submit",class:"bg-green-600 text-white rounded-md p-2 w-[80px]"}," 확인 ",-1),Re={__name:"ScheduleFormSliding",props:{isVisible:Boolean,scheduleId:String,scheduleDate:String},emits:["close"],setup(u,{emit:v}){R();const Y=W("showModal"),D=v,h=u,C=g(""),V=g([]),p=g([]),x=g({id:"",name:""}),$=async()=>{const l=C.value.toLowerCase();if(!l){p.value=[];return}try{const t=await ie(l);V.value=t.data,p.value=V.value}catch(t){console.error("Error fetching clients:",t)}},S=async l=>{x.value=l,C.value=l.client_name,o.client_name=l.client_name,o.phone_number=l.phone_number,p.value=[];try{const t=await ae(l.consultant);x.value.consultant=t.username,x.value.consultant_name=t.full_name}catch(t){console.error("Error fetching clients:",t)}},M=g(null),k=g(null),U=g([]),b=g([]),_=()=>{const l=[];let t=new Date;for(t.setHours(9,0,0,0);t.getHours()<18;)l.push(A(t)),t.setMinutes(t.getMinutes()+10);return l},A=l=>{const t=l.getHours().toString().padStart(2,"0"),s=l.getMinutes().toString().padStart(2,"0");return`${t}:${s}`},q=()=>{if(!M.value)return;const[l,t]=M.value.split(":").map(Number),s=new Date;s.setHours(l,t,0,0);const y=[],z=new Date(s);z.setHours(s.getHours()+1);let O=new Date(s);for(O.setMinutes(O.getMinutes()+10);O<=z;)y.push(A(O)),O.setMinutes(O.getMinutes()+10);b.value=y,k.value=b.value[0]},j=X({consultant_name:B().required("내담자를 선택해주세요."),client_name:B().required("내담자를 선택해주세요."),phone_number:B().required("휴대전화번호를 입력하세요."),title:B().required("일정제목을 입력해주세요."),start_date:B().required("일정시작일을 선택해주세요."),finish_date:B().required("일정종료일을 선택해주세요."),start_time:B().required("시작시간을 선택해주세요."),finish_time:B().required("종료시간을 선택해주세요.")}),o=L({id:"",teacher_username:"",client_id:"",client_name:"",title:"",start_date:h.scheduleDate,finish_date:h.scheduleDate,start_time:A(new Date),finish_time:A(new Date),memo:"",teacher:{}}),n=()=>{D("close")},r=async()=>{var l,t,s;if(!h.scheduleId){Object.keys(o).forEach(y=>{o[y]=""}),console.log("scheduleDate:",h.scheduleDate),o.start_date=h.scheduleDate,o.finish_date=h.scheduleDate;return}console.log("scheduleId",h.scheduleId);try{const y=await he(h.scheduleId);console.log("scheduleInfo:",y),Object.assign(o,y),x.value.consultant_name=(l=o.teacher)==null?void 0:l.full_name,x.value.client_id=o.client_id,o.client_name=(t=o.clientinfo)==null?void 0:t.client_name,o.phone_number=(s=o.clientinfo)==null?void 0:s.phone_number,M.value=o.start_time,q(),k.value=o.finish_time}catch(y){console.error("Error fetching user:",y)}},f=async()=>{try{await me(o),Y("상담일정 정보가 등록되었습니다.")}catch(l){Y("상담일정 정보 등록 중 오류가 발생했습니다."),console.error("Error registering client data:",l)}};G(()=>{r()}),K(()=>{U.value=_(),console.log(U.value)});const w=async l=>{console.log("submitting:",l),Object.assign(o,l),await f(),D("close")};return J(()=>h.scheduleId,(l,t)=>{l!==t&&r()}),J(()=>h.scheduleDate,(l,t)=>{console.log("newScheduleDate:",l),o.start_date=l,o.finish_date=l}),(l,t)=>(c(),d(N,null,[e("div",{onClick:n,class:H(["fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-1000",{"opacity-100 block":u.isVisible,"opacity-0 hidden":!u.isVisible}])},null,2),e("div",{class:H(["fixed top-0 right-0 w-1/3 h-full bg-white shadow-lg p-4 overflow-auto z-50 transition-transform duration-1000 ease-in-out",{"translate-x-full":!u.isVisible,"translate-x-0":u.isVisible}])},[e("div",_e,[e("div",ge,[e("div",{class:"flex items-center justify-evenly mb-2"},[ve,e("button",{class:"ml-auto",onClick:n},xe)]),a(i(se),{onSubmit:w,"validation-schema":i(j),"initial-values":o,class:"space-y-4 text-sm"},{default:Z(()=>[a(i(I),{type:"hidden",name:"teacher_username",modelValue:x.value.consultant,"onUpdate:modelValue":t[0]||(t[0]=s=>x.value.consultant=s)},null,8,["modelValue"]),a(i(I),{type:"hidden",name:"client_id",modelValue:x.value.id,"onUpdate:modelValue":t[1]||(t[1]=s=>x.value.id=s)},null,8,["modelValue"]),e("div",we,[e("div",ye,[ke,e("div",$e,[ee(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>C.value=s),onInput:$,type:"text",id:"client-search",placeholder:"내담자 검색...",class:"block w-full py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,544),[[te,C.value]]),e("div",Ve,[a(i(ue),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),e("div",null,[p.value.length>0?(c(),d("ul",Me,[(c(!0),d(N,null,E(p.value,s=>(c(),d("li",{key:s.id,onClick:y=>S(s),class:"cursor-pointer px-3 py-2 hover:bg-indigo-600 hover:text-white"},m(s.client_name),9,De))),128))])):(c(),d("p",Ce,"검색 결과가 없습니다."))])])])]),e("div",Se,[e("div",je,[Ie,a(i(I),{type:"text",name:"consultant_name",readonly:"",modelValue:x.value.consultant_name,"onUpdate:modelValue":t[3]||(t[3]=s=>x.value.consultant_name=s),class:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(i(F),{name:"consultant_name",class:"text-red-500 text-xs italic mt-2"})])]),e("div",Ne,[e("div",null,[Ae,a(i(I),{name:"client_name",as:"input",type:"text",modelValue:o.client_name,"onUpdate:modelValue":t[4]||(t[4]=s=>o.client_name=s),class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",placeholder:"내담자 이름을 입력하세요."},null,8,["modelValue"]),a(i(F),{name:"client_name",class:"text-red-500 text-xs italic mt-2"})]),e("div",null,[Ue,a(i(I),{name:"phone_number",as:"input",type:"text",modelValue:o.phone_number,"onUpdate:modelValue":t[5]||(t[5]=s=>o.phone_number=s),class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",placeholder:"내담자 휴대전화번호를 입력하세요."},null,8,["modelValue"]),a(i(F),{name:"phone_number",class:"text-red-500 text-xs italic mt-2"})])]),e("div",null,[e("div",Fe,[Ye,a(i(I),{type:"text",name:"title",modelValue:o.title,"onUpdate:modelValue":t[6]||(t[6]=s=>o.title=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(i(F),{name:"title",class:"text-red-500 text-xs italic mt-2"})])]),e("div",Be,[e("div",Ee,[Te,a(i(I),{type:"date",name:"start_date",modelValue:o.start_date,"onUpdate:modelValue":t[7]||(t[7]=s=>o.start_date=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(i(F),{name:"start_date",class:"text-red-500 text-xs italic mt-2"})]),e("div",qe,[ze,a(i(I),{type:"date",name:"finish_date",modelValue:o.finish_date,"onUpdate:modelValue":t[8]||(t[8]=s=>o.finish_date=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(i(F),{name:"finish_date",class:"text-red-500 text-xs italic mt-2"})])]),e("div",He,[e("div",Oe,[Pe,a(i(I),{name:"start_time",id:"start_time",modelValue:M.value,"onUpdate:modelValue":t[9]||(t[9]=s=>M.value=s),as:"select",onChange:q,class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2"},{default:Z(()=>[(c(!0),d(N,null,E(U.value,s=>(c(),d("option",{key:s,value:s},m(s),9,Ze))),128))]),_:1},8,["modelValue"]),a(i(F),{name:"start_time",class:"text-red-500 text-xs italic mt-2"})]),e("div",Je,[Le,a(i(I),{name:"finish_time",id:"finish_time",modelValue:k.value,"onUpdate:modelValue":t[10]||(t[10]=s=>k.value=s),as:"select",class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2"},{default:Z(()=>[(c(!0),d(N,null,E(b.value,s=>(c(),d("option",{key:s,value:s},m(s),9,We))),128))]),_:1},8,["modelValue"]),a(i(F),{name:"finish_time",class:"text-red-500 text-xs italic mt-2"})])]),e("div",null,[Ge,a(i(I),{name:"memo",as:"textarea",class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",rows:"3",modelValue:o.memo,"onUpdate:modelValue":t[11]||(t[11]=s=>o.memo=s),placeholder:"내담자의 상담정보를 메모해보세요. 최대 100자 까지 입력하실 수 있습니다."},null,8,["modelValue"]),a(i(F),{name:"memo",class:"text-red-500 text-xs italic mt-2"}),Ke]),e("div",{class:"flex justify-between mt-4"},[e("button",{type:"button",onClick:n,class:"bg-gray-400 text-white rounded-md p-2 w-[80px]"}," 취소 "),Qe])]),_:1},8,["validation-schema","initial-values"])])])],2)],64))}},Xe={className:"w-full bg-neutral-50 shadow-lg rounded-lg p-6"},et={className:"border-b pb-2 mb-4"},tt=e("h2",{class:"font-title font-bold"},"상담일정",-1),st=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),lt=[st],ot={class:"text-lg font-semibold text-gray-500 flex items-center justify-center"},nt={class:"grid grid-cols-1 gap-y-6"},at={class:"w-8"},it={class:"w-full"},rt=["onClick"],ct={class:"flex justify-between items-center px-1 h-full w-full"},dt={class:"inline-block"},ut={class:"ml-auto inline-block"},mt={class:"flex justify-between items-center px-1 h-full w-full"},ht=e("span",{class:"inline-block"},"상담사",-1),bt={class:"ml-auto inline-block"},ft={class:"flex justify-between items-center px-1 h-full w-full"},_t=e("span",{class:"inline-block"},"상담시간",-1),gt={class:"ml-auto inline-block"},vt={class:"flex justify-between items-center px-1 h-full w-full"},pt=e("span",{class:"inline-block"},"상담제목",-1),xt={class:"ml-auto inline-block"},wt={class:"flex justify-center items-center px-1 h-full w-full"},yt=["onClick"],kt={__name:"DailyViewSliding",props:{isDailyViewSlidingVisible:Boolean,scheduleDate:String},emits:["close"],setup(u,{emit:v}){W("showModal");const Y=v,D=u;g(["5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM"]);const h=g([]),C=()=>{Y("close")},V=async()=>{if(!D.scheduleDate)return;const[$,S,M]=D.scheduleDate.split("-");try{const k=await fe($,S,M);h.value=k.data,console.log("daily sliding schedule_data:",h.value)}catch(k){console.error("Error fetching monthly schedule data:",k)}};K(()=>{V()}),J(()=>D.scheduleDate,($,S)=>{$!==S&&V()});const p=L({}),x=($,S,M)=>{M.stopPropagation(),p[$]||(p[$]={}),p[$][S]=!p[$][S]};return($,S)=>(c(),d(N,null,[e("div",{onClick:C,class:H(["fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-1000",{"opacity-100 block":u.isDailyViewSlidingVisible,"opacity-0 hidden":!u.isDailyViewSlidingVisible}])},null,2),e("div",{class:H(["fixed top-0 right-0 w-1/3 h-full bg-white shadow-lg p-4 overflow-auto z-50 transition-transform duration-1000 ease-in-out",{"translate-x-full":!u.isDailyViewSlidingVisible,"translate-x-0":u.isDailyViewSlidingVisible}])},[e("div",Xe,[e("div",et,[e("div",{class:"flex items-center justify-evenly mb-2"},[tt,e("button",{class:"ml-auto",onClick:C},lt)]),e("div",null,[e("div",ot,[e("span",null,m(u.scheduleDate),1)])]),e("div",nt,[(c(!0),d(N,null,E(h.value,(M,k)=>(c(),d("div",{key:k,class:"flex text-gray-500 border-b min-h-10 h-auto flex items-center pl-2 divide-x divide-gray-300 w-full"},[e("div",at,m(k.toString().padStart(2,"0")),1),e("div",it,[(c(!0),d(N,null,E(M,(U,b)=>(c(),d("div",{key:b,class:"flex items-center justify-between w-full"},[(c(!0),d(N,null,E(U,(_,A)=>{var q;return c(),d("div",{class:H(["flex-row text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 space-y-1 w-full",["transform transition duration-500 ease-in-out overflow-hidden",(q=p[_.schedule_time])!=null&&q[A]?"scale-105 h-auto min-h-6 w-full pt-1 bg-white/100 border-blue-700":"scale-100 h-6 bg-blue-400/20"]]),key:A,onClick:j=>x(_.schedule_time,A,j)},[e("div",ct,[e("span",dt,m(_.schedule_time),1),e("span",ut,"["+m(_.client_name)+"] "+m(_.teacher_expertise),1)]),e("div",mt,[ht,e("span",bt,m(_.teacher_fullname),1)]),e("div",ft,[_t,e("span",gt,m(_.start_time)+" ~ "+m(_.finish_time),1)]),e("div",vt,[pt,e("span",xt,m(_.title),1)]),e("div",wt,[e("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:j=>$.clickCalendarSchedule(_.schedule_id,_.schedule_date)},[a(i(Q),{class:"w-4 h-4"})],8,yt)])],10,rt)}),128))]))),128))])]))),128))])])])],2)],64))}},$t=e("section",null,[e("div",{class:"w-full sm:container"},[e("div",{class:"border-black border-l-[5px] pl-5"},[e("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"Monthly Schedule")])])],-1),Vt={class:"max-w-full mx-auto p-4"},Mt={class:"flex justify-between items-center mb-4"},Dt={class:"flex items-center space-x-2"},Ct={class:"text-xl font-semibold"},St={class:"flex space-x-2 text-sm font-semibold"},jt=e("span",null,"Today",-1),It=[jt],Nt={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},At=le('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),Ut=["onClick"],Ft=["onClick"],Yt={class:"flex justify-between items-center px-1 h-full w-full"},Bt={class:"inline-block"},Et={class:"ml-auto inline-block"},Tt={class:"flex justify-between items-center px-1 h-full w-full"},qt=e("span",{class:"inline-block"},"상담사",-1),zt={class:"ml-auto inline-block"},Ht={class:"flex justify-between items-center px-1 h-full w-full"},Ot=e("span",{class:"inline-block"},"상담시간",-1),Pt={class:"ml-auto inline-block"},Zt={class:"flex justify-between items-center px-1 h-full w-full"},Jt=e("span",{class:"inline-block"},"상담제목",-1),Lt={class:"ml-auto inline-block"},Wt={class:"flex justify-center items-center px-1 h-full w-full"},Gt=["onClick"],Kt=["onClick"],ts={__name:"MonthlyView",setup(u){const v=L({}),Y=(n,r,f)=>{f.stopPropagation(),v[n]||(v[n]={}),v[n][r]=!v[n][r]},D=g(!1),h=g(!1),C=g(""),V=g(""),p=()=>{D.value=!D.value,D.value||(C.value="",V.value=""),j(b.value.currentYear,b.value.currentMonth)},x=()=>{h.value=!h.value,h.value||(V.value=""),j(b.value.currentYear,b.value.currentMonth)},$=n=>{V.value=n,x()},S=n=>{V.value=n,p()},M=(n,r)=>{C.value=parseInt(n,10),V.value=r,p()},k=["January","February","March","April","May","June","July","August","September","October","November","December"],U=g([]),b=g({}),_=g(""),A=n=>{const r=n.getFullYear(),f=String(n.getMonth()+1).padStart(2,"0"),w=String(n.getDate()).padStart(2,"0");return`${r}-${f}-${w}`};_.value=A(new Date),console.log("today:",_.value);const q=(n,r)=>{const f=new Date(n,r,1),w=f.getFullYear(),l=f.getMonth()+1;let t=w,s=l-1;s===0&&(s=12,t-=1);let y=w,z=l+1;return z===13&&(z=1,y+=1),console.log("currentYear:",w,"currentMonth:",l),{currentDate:f,currentYear:w,currentMonth:l,currentMonthName:k[l-1],prevYear:t,prevMonth:s,prevMonthName:k[s-1],nextYear:y,nextMonth:z,nextMonthName:k[z-1]}},j=async(n,r)=>{n||(n=new Date().getFullYear()),r||(r=new Date().getMonth()+1);try{const f=await be(n,r);U.value=f.data,o(n,r-1),console.log("schedule_data:",U.value)}catch(f){console.error("Error fetching monthly schedule data:",f)}},o=(n,r)=>{b.value=q(n,r)};return G(()=>{const n=new Date().getFullYear(),r=new Date().getMonth();o(n,r),j(b.value.currentYear,b.value.currentMonth)}),(n,r)=>(c(),d(N,null,[$t,e("div",Vt,[e("div",Mt,[e("div",Dt,[e("button",{class:"p-2 rounded-full font-semibold",onClick:r[0]||(r[0]=f=>j(b.value.prevYear,b.value.prevMonth))},[a(i(re),{class:"w-6 h-6"})]),e("h2",Ct,m(b.value.currentMonthName)+" "+m(b.value.currentYear),1),e("button",{class:"p-2 rounded-full font-semibold",onClick:r[1]||(r[1]=f=>j(b.value.nextYear,b.value.nextMonth))},[a(i(ce),{class:"w-6 h-6"})])]),e("div",St,[e("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:r[2]||(r[2]=f=>j())},It),e("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:p}," 상담 등록 ")])]),e("div",Nt,[At,(c(!0),d(N,null,E(U.value,(f,w)=>(c(),d("div",{class:"bg-white h-32 p-2",key:w,onClick:l=>S(w)},[e("span",{class:H({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":w===_.value})},m(w.split("-")[2]),3),(c(!0),d(N,null,E(f.slice(0,2),(l,t)=>{var s;return c(),d("div",{class:H(["flex-row text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(s=v[w])!=null&&s[t]?"scale-105 h-auto min-h-6 w-full pt-1 bg-white/100 border-blue-700":"scale-100 h-6 bg-blue-400/20"]]),key:t,onClick:y=>Y(w,t,y)},[e("div",Yt,[e("span",Bt,"["+m(l.client_name)+"] "+m(l.teacher_expertise),1),e("span",Et,m(l.schedule_time),1)]),e("div",Tt,[qt,e("span",zt,m(l.teacher_fullname),1)]),e("div",Ht,[Ot,e("span",Pt,m(l.start_time)+" ~ "+m(l.finish_time),1)]),e("div",Zt,[Jt,e("span",Lt,m(l.title),1)]),e("div",Wt,[e("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:y=>M(l.schedule_id,l.schedule_date)},[a(i(Q),{class:"w-4 h-4"})],8,Gt)])],10,Ft)}),128)),f.length>2?(c(),d("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:oe(l=>$(w),["stop"])},[a(i(de),{class:"w-4 h-4"})],8,Kt)):ne("",!0)],8,Ut))),128))]),a(Re,{isVisible:D.value,scheduleId:C.value,scheduleDate:V.value,onClose:p},null,8,["isVisible","scheduleId","scheduleDate"]),a(kt,{isDailyViewSlidingVisible:h.value,scheduleDate:V.value,onClose:x},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64))}};export{ts as default};
