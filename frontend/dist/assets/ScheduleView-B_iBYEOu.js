import{l as z,z as y,A as x,G as P,O as V,x as Y,o as a,e,t as d,d as r,B as w,C as A,F as f}from"./index-DYkgv6yf.js";import{M as E}from"./MobileLayout-B5niWt1I.js";import{g as G}from"./schedule-B0kk96-p.js";import"./teacherStore-Bd5PY4Ed.js";const N={class:"p-4"},R={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},W={class:"flex items-center justify-between"},q=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),H=[q],J={class:"font-semibold text-lg"},K=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),Q=[K],U={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},X=e("div",{class:"grid grid-cols-7 gap-1 mb-2"},[e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"일"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"월"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"화"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"수"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"목"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"금"),e("div",{class:"text-center text-xs font-semibold text-gray-500 py-2"},"토")],-1),Z={class:"grid grid-cols-7 gap-1"},tt=["onClick"],et={class:"bg-white rounded-lg shadow-sm p-4"},st=e("h3",{class:"font-semibold text-lg mb-3"},"일정 목록",-1),ot={key:0,class:"text-center py-8 text-gray-500"},nt={key:1,class:"space-y-3"},at=["onClick"],lt={class:"text-sm text-gray-500"},rt={class:"font-semibold"},ct={class:"text-sm text-gray-600 mt-1"},mt={__name:"ScheduleView",setup(it){const p=z(),l=y(new Date),v=y(new Date),u=y([]),b=x(()=>{const t=l.value;return`${t.getFullYear()}년 ${String(t.getMonth()+1).padStart(2,"0")}월`}),h=x(()=>{const t=l.value;return{year:t.getFullYear(),month:t.getMonth()+1}}),D=x(()=>{const t=h.value.year,n=h.value.month,s=new Date(t,n-1,1),O=new Date(t,n,0).getDate(),I=s.getDay(),c=[],F=new Date().toISOString().split("T")[0],L=new Date(t,n-2,0);for(let o=I-1;o>=0;o--){const i=new Date(t,n-2,L.getDate()-o);c.push({date:i.toISOString().split("T")[0],day:i.getDate(),isCurrentMonth:!1,isToday:!1,isSelected:!1,hasSchedule:!1})}for(let o=1;o<=O;o++){const g=new Date(t,n-1,o).toISOString().split("T")[0];c.push({date:g,day:o,isCurrentMonth:!0,isToday:g===F,isSelected:g===v.value.toISOString().split("T")[0],hasSchedule:u.value.some(j=>j.date===g)})}const $=42-c.length;for(let o=1;o<=$;o++){const i=new Date(t,n,o);c.push({date:i.toISOString().split("T")[0],day:o,isCurrentMonth:!1,isToday:!1,isSelected:!1,hasSchedule:!1})}return c}),S=()=>{const t=new Date(l.value);t.setMonth(t.getMonth()-1),l.value=t,m()},M=()=>{const t=new Date(l.value);t.setMonth(t.getMonth()+1),l.value=t,m()},k=t=>{v.value=new Date(t),p.push({name:"MobileScheduleList",params:{date:t}})},C=()=>{},T=()=>{p.push({name:"MobileScheduleForm"})},B=t=>{p.push({name:"MobileScheduleDetail",params:{id:t.id}})},m=async()=>{try{const t=await G(h.value.year,h.value.month);u.value=t.data||[]}catch(t){console.error("일정 조회 오류:",t)}};return P(()=>{m()}),(t,n)=>(a(),V(E,{"header-title":"일정","show-menu":!0,"show-plus":!0,"active-tab":"calendar",onMenu:C,onPlus:T},{default:Y(()=>[e("div",N,[e("div",R,[e("div",W,[e("button",{onClick:S,class:"p-2"},H),e("h2",J,d(b.value),1),e("button",{onClick:M,class:"p-2"},Q)])]),e("div",U,[X,e("div",Z,[(a(!0),r(f,null,w(D.value,s=>(a(),r("div",{key:s.date,onClick:_=>k(s.date),class:A(["text-center py-2 rounded-lg cursor-pointer text-sm",s.isCurrentMonth?"text-gray-900":"text-gray-400",s.isToday?"bg-blue-100 text-blue-600 font-semibold":"",s.isSelected?"bg-blue-600 text-white font-semibold":"",s.hasSchedule?"font-semibold":""])},d(s.day),11,tt))),128))])]),e("div",et,[st,u.value.length===0?(a(),r("div",ot," 등록된 일정이 없습니다. ")):(a(),r("div",nt,[(a(!0),r(f,null,w(u.value,s=>(a(),r("div",{key:s.id,onClick:_=>B(s),class:"border-l-4 border-blue-600 pl-4 py-2 cursor-pointer hover:bg-gray-50 rounded-r-lg"},[e("div",lt,d(s.time),1),e("div",rt,d(s.title),1),e("div",ct,d(s.content),1)],8,at))),128))]))])])]),_:1}))}};export{mt as default};
