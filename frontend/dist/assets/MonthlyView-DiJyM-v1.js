import{o as c,d,e,z as P,u as X,i as G,q as v,c as ee,a as Y,M as W,s as K,N as Q,O as J,J as q,n,p as Z,g as i,A as j,f as te,v as se,F as I,x as B,t as m,E as U,B as le,j as z,w as L,y as oe,C as ae}from"./index-DGgoadmK.js";import{f as ne}from"./user-DP4TU0cU.js";import{s as ie}from"./client-BADynipv.js";import{r as re,a as ce}from"./ChevronRightIcon-DwXdVEJa.js";function R(u,x){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z"})])}function de(u,x){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}function ue(u,x){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})])}const me=async u=>P.post("/schedules",u),he=async u=>P.get(`/schedules/${u}`),be=async(u,x)=>P.get(`/schedules/calendar/${u}/${x}`),fe=async(u,x,N)=>P.get(`/schedules/calendar/daily/${u}/${x}/${N}`),_e={className:"w-full bg-neutral-50 shadow-lg rounded-lg p-6"},ge={className:"border-b pb-2 mb-4"},pe=e("h2",{class:"font-title font-bold"},"상담일정",-1),ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),xe=[ve],we={class:"grid gap-4"},ye={class:"mb-4"},ke=e("label",{for:"client-search",class:"block text-sm font-medium text-gray-700"},"내담자를 선택하세요.",-1),$e={class:"relative mt-1"},Ve={class:"absolute inset-y-0 right-0 flex items-center pr-3"},Me={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto"},De=["onClick"],Ce={key:1,class:"absolute mt-2 text-sm text-gray-500"},Se={class:"grid grid-cols-1 gap-4"},je={class:"mb-4"},Ie=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("상담사 "),e("span",{class:"text-red-500"},"*")],-1),Ne={class:"grid grid-cols-2 gap-4"},Ae=e("label",{class:"block mb-1 text-gray-700"},[z("내담자 이름 "),e("span",{class:"text-red-500"},"*")],-1),Ue=e("label",{class:"block mb-1 text-gray-700"},[z("내담자 휴대전화번호 "),e("span",{class:"text-red-500"},"*")],-1),Fe={class:"mb-4"},Ye=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("일정제목 "),e("span",{class:"text-red-500"},"*")],-1),Be={class:"grid grid-cols-2 gap-4"},ze={class:"mb-4"},Ee=e("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("일정시작일 "),e("span",{class:"text-red-500"},"*")],-1),Te={class:"mb-4"},qe=e("label",{for:"finish_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("일정종료일 "),e("span",{class:"text-red-500"},"*")],-1),He={class:"grid grid-cols-2 gap-4"},Oe={class:"mb-4"},Pe=e("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("시작시간 "),e("span",{class:"text-red-500"},"*")],-1),Ze=["value"],Je={class:"mb-4"},Le=e("label",{for:"finish_time",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[z("종료시간 "),e("span",{class:"text-red-500"},"*")],-1),We=["value"],Ge=e("label",{class:"block mb-1 text-gray-700"},"메모",-1),Ke=e("div",{class:"text-right text-gray-500 text-sm"},"0 / 100",-1),Qe=e("button",{type:"submit",class:"bg-green-600 text-white rounded-md p-2 w-[80px]"}," 확인 ",-1),Re={__name:"ScheduleFormSliding",props:{isVisible:Boolean,scheduleId:String,scheduleDate:String},emits:["close"],setup(u,{emit:x}){X();const N=G("showModal"),A=x,p=u,C=v(""),M=v([]),D=v([]),h=v({id:"",name:""}),O=async()=>{const l=C.value.toLowerCase();if(!l){D.value=[];return}try{const t=await ie(l);M.value=t.data,D.value=M.value}catch(t){console.error("Error fetching clients:",t)}},k=async l=>{h.value=l,C.value=l.client_name,o.client_name=l.client_name,o.phone_number=l.phone_number,D.value=[];try{const t=await ne(l.consultant);h.value.consultant=t.username,h.value.consultant_name=t.full_name}catch(t){console.error("Error fetching clients:",t)}},_=v(null),$=v(null),V=v([]),b=v([]),E=()=>{const l=[];let t=new Date;for(t.setHours(9,0,0,0);t.getHours()<18;)l.push(g(t)),t.setMinutes(t.getMinutes()+10);return l},g=l=>{const t=l.getHours().toString().padStart(2,"0"),s=l.getMinutes().toString().padStart(2,"0");return`${t}:${s}`},F=()=>{if(!_.value)return;const[l,t]=_.value.split(":").map(Number),s=new Date;s.setHours(l,t,0,0);const y=[],T=new Date(s);T.setHours(s.getHours()+1);let H=new Date(s);for(H.setMinutes(H.getMinutes()+10);H<=T;)y.push(g(H)),H.setMinutes(H.getMinutes()+10);b.value=y,$.value=b.value[0]},S=ee({consultant_name:Y().required("내담자를 선택해주세요."),client_name:Y().required("내담자를 선택해주세요."),phone_number:Y().required("휴대전화번호를 입력하세요."),title:Y().required("일정제목을 입력해주세요."),start_date:Y().required("일정시작일을 선택해주세요."),finish_date:Y().required("일정종료일을 선택해주세요."),start_time:Y().required("시작시간을 선택해주세요."),finish_time:Y().required("종료시간을 선택해주세요.")}),o=W({id:"",teacher_username:"",client_id:"",client_name:"",title:"",start_date:p.scheduleDate,finish_date:p.scheduleDate,start_time:g(new Date),finish_time:g(new Date),memo:"",teacher:{}}),a=()=>{A("close")},r=async()=>{var l,t,s;if(!p.scheduleId){Object.keys(o).forEach(y=>{o[y]=""}),console.log("scheduleDate:",p.scheduleDate),o.start_date=p.scheduleDate,o.finish_date=p.scheduleDate;return}console.log("scheduleId",p.scheduleId);try{const y=await he(p.scheduleId);console.log("scheduleInfo:",y),Object.assign(o,y),h.value.consultant_name=(l=o.teacher)==null?void 0:l.full_name,h.value.client_id=o.client_id,o.client_name=(t=o.clientinfo)==null?void 0:t.client_name,o.phone_number=(s=o.clientinfo)==null?void 0:s.phone_number,_.value=o.start_time,F(),$.value=o.finish_time}catch(y){console.error("Error fetching user:",y)}},f=async()=>{try{await me(o),N("상담일정 정보가 등록되었습니다.")}catch(l){N("상담일정 정보 등록 중 오류가 발생했습니다."),console.error("Error registering client data:",l)}};K(()=>{r()}),Q(()=>{V.value=E(),console.log(V.value)});const w=async l=>{console.log("submitting:",l),Object.assign(o,l),await f(),A("close")};return J(()=>p.scheduleId,(l,t)=>{l!==t&&r()}),J(()=>p.scheduleDate,(l,t)=>{console.log("newScheduleDate:",l),o.start_date=l,o.finish_date=l}),(l,t)=>(c(),d(I,null,[e("div",{onClick:a,class:q(["fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-1000",{"opacity-100 block":u.isVisible,"opacity-0 hidden":!u.isVisible}])},null,2),e("div",{class:q(["fixed top-0 right-0 w-1/3 h-full bg-white shadow-lg p-4 overflow-auto z-50 transition-transform duration-1000 ease-in-out",{"translate-x-full":!u.isVisible,"translate-x-0":u.isVisible}])},[e("div",_e,[e("div",ge,[e("div",{class:"flex items-center justify-evenly mb-2"},[pe,e("button",{class:"ml-auto",onClick:a},xe)]),n(i(le),{onSubmit:w,"validation-schema":i(S),"initial-values":o,class:"space-y-4 text-sm"},{default:Z(()=>[n(i(j),{type:"hidden",name:"teacher_username",modelValue:h.value.consultant,"onUpdate:modelValue":t[0]||(t[0]=s=>h.value.consultant=s)},null,8,["modelValue"]),n(i(j),{type:"hidden",name:"client_id",modelValue:h.value.id,"onUpdate:modelValue":t[1]||(t[1]=s=>h.value.id=s)},null,8,["modelValue"]),e("div",we,[e("div",ye,[ke,e("div",$e,[te(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>C.value=s),onInput:O,type:"text",id:"client-search",placeholder:"내담자 검색...",class:"block w-full py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,544),[[se,C.value]]),e("div",Ve,[n(i(ue),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),e("div",null,[D.value.length>0?(c(),d("ul",Me,[(c(!0),d(I,null,B(D.value,s=>(c(),d("li",{key:s.id,onClick:y=>k(s),class:"cursor-pointer px-3 py-2 hover:bg-indigo-600 hover:text-white"},m(s.client_name),9,De))),128))])):(c(),d("p",Ce,"검색 결과가 없습니다."))])])])]),e("div",Se,[e("div",je,[Ie,n(i(j),{type:"text",name:"consultant_name",readonly:"",modelValue:h.value.consultant_name,"onUpdate:modelValue":t[3]||(t[3]=s=>h.value.consultant_name=s),class:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),n(i(U),{name:"consultant_name",class:"text-red-500 text-xs italic mt-2"})])]),e("div",Ne,[e("div",null,[Ae,n(i(j),{name:"client_name",as:"input",type:"text",modelValue:o.client_name,"onUpdate:modelValue":t[4]||(t[4]=s=>o.client_name=s),class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",placeholder:"내담자 이름을 입력하세요."},null,8,["modelValue"]),n(i(U),{name:"client_name",class:"text-red-500 text-xs italic mt-2"})]),e("div",null,[Ue,n(i(j),{name:"phone_number",as:"input",type:"text",modelValue:o.phone_number,"onUpdate:modelValue":t[5]||(t[5]=s=>o.phone_number=s),class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",placeholder:"내담자 휴대전화번호를 입력하세요."},null,8,["modelValue"]),n(i(U),{name:"phone_number",class:"text-red-500 text-xs italic mt-2"})])]),e("div",null,[e("div",Fe,[Ye,n(i(j),{type:"text",name:"title",modelValue:o.title,"onUpdate:modelValue":t[6]||(t[6]=s=>o.title=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),n(i(U),{name:"title",class:"text-red-500 text-xs italic mt-2"})])]),e("div",Be,[e("div",ze,[Ee,n(i(j),{type:"date",name:"start_date",modelValue:o.start_date,"onUpdate:modelValue":t[7]||(t[7]=s=>o.start_date=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),n(i(U),{name:"start_date",class:"text-red-500 text-xs italic mt-2"})]),e("div",Te,[qe,n(i(j),{type:"date",name:"finish_date",modelValue:o.finish_date,"onUpdate:modelValue":t[8]||(t[8]=s=>o.finish_date=s),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),n(i(U),{name:"finish_date",class:"text-red-500 text-xs italic mt-2"})])]),e("div",He,[e("div",Oe,[Pe,n(i(j),{name:"start_time",id:"start_time",modelValue:_.value,"onUpdate:modelValue":t[9]||(t[9]=s=>_.value=s),as:"select",onChange:F,class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2"},{default:Z(()=>[(c(!0),d(I,null,B(V.value,s=>(c(),d("option",{key:s,value:s},m(s),9,Ze))),128))]),_:1},8,["modelValue"]),n(i(U),{name:"start_time",class:"text-red-500 text-xs italic mt-2"})]),e("div",Je,[Le,n(i(j),{name:"finish_time",id:"finish_time",modelValue:$.value,"onUpdate:modelValue":t[10]||(t[10]=s=>$.value=s),as:"select",class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2"},{default:Z(()=>[(c(!0),d(I,null,B(b.value,s=>(c(),d("option",{key:s,value:s},m(s),9,We))),128))]),_:1},8,["modelValue"]),n(i(U),{name:"finish_time",class:"text-red-500 text-xs italic mt-2"})])]),e("div",null,[Ge,n(i(j),{name:"memo",as:"textarea",class:"w-full bg-neutral-50 border border-gray-300 rounded-md p-2",rows:"3",modelValue:o.memo,"onUpdate:modelValue":t[11]||(t[11]=s=>o.memo=s),placeholder:"내담자의 상담정보를 메모해보세요. 최대 100자 까지 입력하실 수 있습니다."},null,8,["modelValue"]),n(i(U),{name:"memo",class:"text-red-500 text-xs italic mt-2"}),Ke]),e("div",{class:"flex justify-between mt-4"},[e("button",{type:"button",onClick:a,class:"bg-gray-400 text-white rounded-md p-2 w-[80px]"}," 취소 "),Qe])]),_:1},8,["validation-schema","initial-values"])])])],2)],64))}},Xe={className:"w-full bg-neutral-50 shadow-lg rounded-lg p-6"},et={className:"border-b pb-2 mb-4"},tt=e("h2",{class:"font-title font-bold"},"상담일정",-1),st=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),lt=[st],ot={class:"text-lg font-semibold text-gray-500 flex items-center justify-center"},at={class:"grid grid-cols-1 gap-y-6"},nt={class:"w-8"},it={class:"w-full"},rt=["onClick"],ct={class:"flex justify-between items-center px-1 h-full w-full"},dt={class:"inline-block"},ut={class:"ml-auto inline-block"},mt={class:"flex justify-between items-center px-1 h-full w-full"},ht=e("span",{class:"inline-block"},"상담사",-1),bt={class:"ml-auto inline-block"},ft={class:"flex justify-between items-center px-1 h-full w-full"},_t=e("span",{class:"inline-block"},"상담시간",-1),gt={class:"ml-auto inline-block"},pt={class:"flex justify-between items-center px-1 h-full w-full"},vt=e("span",{class:"inline-block"},"상담제목",-1),xt={class:"ml-auto inline-block"},wt={class:"flex justify-center items-center px-1 h-full w-full"},yt=["onClick"],kt={__name:"DailyViewSliding",props:{isDailyViewSlidingVisible:Boolean,scheduleDate:String},emits:["close","clickCalendarSchedule"],setup(u,{emit:x}){G("showModal");const N=u,A=x,p=(k,_)=>{A("clickCalendarSchedule",k,_)};v(["5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM"]);const C=v([]),M=()=>{A("close")},D=async()=>{if(!N.scheduleDate)return;const[k,_,$]=N.scheduleDate.split("-");try{const V=await fe(k,_,$);C.value=V.data,console.log("daily sliding schedule_data:",C.value)}catch(V){console.error("Error fetching monthly schedule data:",V)}};Q(()=>{D()}),J(()=>N.scheduleDate,(k,_)=>{k!==_&&D()});const h=W({}),O=(k,_,$)=>{$.stopPropagation(),h[k]||(h[k]={}),h[k][_]=!h[k][_]};return(k,_)=>(c(),d(I,null,[e("div",{onClick:M,class:q(["fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-1000",{"opacity-100 block":u.isDailyViewSlidingVisible,"opacity-0 hidden":!u.isDailyViewSlidingVisible}])},null,2),e("div",{class:q(["fixed top-0 right-0 w-1/3 h-full bg-white shadow-lg p-4 overflow-auto z-40 transition-transform duration-1000 ease-in-out",{"translate-x-full":!u.isDailyViewSlidingVisible,"translate-x-0":u.isDailyViewSlidingVisible}])},[e("div",Xe,[e("div",et,[e("div",{class:"flex items-center justify-evenly mb-2"},[tt,e("button",{class:"ml-auto",onClick:M},lt)]),e("div",null,[e("div",ot,[e("span",null,m(u.scheduleDate),1)])]),e("div",at,[(c(!0),d(I,null,B(C.value,($,V)=>(c(),d("div",{key:V,class:"flex text-gray-500 border-b min-h-10 h-auto flex items-center pl-2 divide-x divide-gray-300 w-full"},[e("div",nt,m(V.toString().padStart(2,"0")),1),e("div",it,[(c(!0),d(I,null,B($,(b,E)=>(c(),d("div",{key:E,class:"flex items-center justify-between w-full"},[(c(!0),d(I,null,B(b,(g,F)=>{var S;return c(),d("div",{class:q(["flex-row text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 space-y-1 w-full",["transform transition duration-500 ease-in-out overflow-hidden",(S=h[g.schedule_time])!=null&&S[F]?"scale-105 h-auto min-h-6 w-full pt-1 bg-white/100 border-blue-700":"scale-100 h-6 bg-blue-400/20"]]),key:F,onClick:L(o=>O(g.schedule_time,F,o),["stop"])},[e("div",ct,[e("span",dt,m(g.schedule_time),1),e("span",ut,"["+m(g.client_name)+"] "+m(g.teacher_expertise),1)]),e("div",mt,[ht,e("span",bt,m(g.teacher_fullname),1)]),e("div",ft,[_t,e("span",gt,m(g.start_time)+" ~ "+m(g.finish_time),1)]),e("div",pt,[vt,e("span",xt,m(g.title),1)]),e("div",wt,[e("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:L(o=>p(g.schedule_id,g.schedule_date),["stop"])},[n(i(R),{class:"w-4 h-4"})],8,yt)])],10,rt)}),128))]))),128))])]))),128))])])])],2)],64))}},$t=e("section",null,[e("div",{class:"w-full sm:container"},[e("div",{class:"border-black border-l-[5px] pl-5"},[e("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"Monthly Schedule")])])],-1),Vt={class:"max-w-full mx-auto p-4"},Mt={class:"flex justify-between items-center mb-4"},Dt={class:"flex items-center space-x-2"},Ct={class:"text-xl font-semibold"},St={class:"flex space-x-2 text-sm font-semibold"},jt=e("span",null,"Today",-1),It=[jt],Nt={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},At=oe('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),Ut=["onClick"],Ft=["onClick"],Yt={class:"flex justify-between items-center px-1 h-full w-full"},Bt={class:"inline-block"},zt={class:"ml-auto inline-block"},Et={class:"flex justify-between items-center px-1 h-full w-full"},Tt=e("span",{class:"inline-block"},"상담사",-1),qt={class:"ml-auto inline-block"},Ht={class:"flex justify-between items-center px-1 h-full w-full"},Ot=e("span",{class:"inline-block"},"상담시간",-1),Pt={class:"ml-auto inline-block"},Zt={class:"flex justify-between items-center px-1 h-full w-full"},Jt=e("span",{class:"inline-block"},"상담제목",-1),Lt={class:"ml-auto inline-block"},Wt={class:"flex justify-center items-center px-1 h-full w-full"},Gt=["onClick"],Kt=["onClick"],ts={__name:"MonthlyView",setup(u){const x=W({}),N=(a,r,f)=>{f.stopPropagation(),x[a]||(x[a]={}),x[a][r]=!x[a][r]},A=v(!1),p=v(!1),C=v(""),M=v(""),D=()=>{A.value=!A.value,A.value||(C.value="",M.value=""),S(b.value.currentYear,b.value.currentMonth)},h=()=>{p.value=!p.value,p.value||(M.value=""),S(b.value.currentYear,b.value.currentMonth)},O=a=>{M.value=a,h()},k=a=>{M.value=a,D()},_=(a,r)=>{C.value=parseInt(a,10),M.value=r,D()},$=["January","February","March","April","May","June","July","August","September","October","November","December"],V=v([]),b=v({}),E=v(""),g=a=>{const r=a.getFullYear(),f=String(a.getMonth()+1).padStart(2,"0"),w=String(a.getDate()).padStart(2,"0");return`${r}-${f}-${w}`};E.value=g(new Date),console.log("today:",E.value);const F=(a,r)=>{const f=new Date(a,r,1),w=f.getFullYear(),l=f.getMonth()+1;let t=w,s=l-1;s===0&&(s=12,t-=1);let y=w,T=l+1;return T===13&&(T=1,y+=1),console.log("currentYear:",w,"currentMonth:",l),{currentDate:f,currentYear:w,currentMonth:l,currentMonthName:$[l-1],prevYear:t,prevMonth:s,prevMonthName:$[s-1],nextYear:y,nextMonth:T,nextMonthName:$[T-1]}},S=async(a,r)=>{a||(a=new Date().getFullYear()),r||(r=new Date().getMonth()+1);try{const f=await be(a,r);V.value=f.data,o(a,r-1),console.log("schedule_data:",V.value)}catch(f){console.error("Error fetching monthly schedule data:",f)}},o=(a,r)=>{b.value=F(a,r)};return K(()=>{const a=new Date().getFullYear(),r=new Date().getMonth();o(a,r),S(b.value.currentYear,b.value.currentMonth)}),(a,r)=>(c(),d(I,null,[$t,e("div",Vt,[e("div",Mt,[e("div",Dt,[e("button",{class:"p-2 rounded-full font-semibold",onClick:r[0]||(r[0]=f=>S(b.value.prevYear,b.value.prevMonth))},[n(i(re),{class:"w-6 h-6"})]),e("h2",Ct,m(b.value.currentMonthName)+" "+m(b.value.currentYear),1),e("button",{class:"p-2 rounded-full font-semibold",onClick:r[1]||(r[1]=f=>S(b.value.nextYear,b.value.nextMonth))},[n(i(ce),{class:"w-6 h-6"})])]),e("div",St,[e("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:r[2]||(r[2]=f=>S())},It),e("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:D}," 상담 등록 ")])]),e("div",Nt,[At,(c(!0),d(I,null,B(V.value,(f,w)=>(c(),d("div",{class:"bg-white h-32 p-2",key:w,onClick:l=>k(w)},[e("span",{class:q({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":w===E.value})},m(w.split("-")[2]),3),(c(!0),d(I,null,B(f.slice(0,2),(l,t)=>{var s;return c(),d("div",{class:q(["flex-row text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(s=x[w])!=null&&s[t]?"scale-105 h-auto min-h-6 w-full pt-1 bg-white/100 border-blue-700":"scale-100 h-6 bg-blue-400/20"]]),key:t,onClick:y=>N(w,t,y)},[e("div",Yt,[e("span",Bt,"["+m(l.client_name)+"] "+m(l.teacher_expertise),1),e("span",zt,m(l.schedule_time),1)]),e("div",Et,[Tt,e("span",qt,m(l.teacher_fullname),1)]),e("div",Ht,[Ot,e("span",Pt,m(l.start_time)+" ~ "+m(l.finish_time),1)]),e("div",Zt,[Jt,e("span",Lt,m(l.title),1)]),e("div",Wt,[e("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:y=>_(l.schedule_id,l.schedule_date)},[n(i(R),{class:"w-4 h-4"})],8,Gt)])],10,Ft)}),128)),f.length>2?(c(),d("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:L(l=>O(w),["stop"])},[n(i(de),{class:"w-4 h-4"})],8,Kt)):ae("",!0)],8,Ut))),128))]),n(Re,{isVisible:A.value,scheduleId:C.value,scheduleDate:M.value,onClose:D,class:"z-20"},null,8,["isVisible","scheduleId","scheduleDate"]),n(kt,{isDailyViewSlidingVisible:p.value,scheduleDate:M.value,onClose:h,onClickCalendarSchedule:_,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64))}};export{ts as default};
