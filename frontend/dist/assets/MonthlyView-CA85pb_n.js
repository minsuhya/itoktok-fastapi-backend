import{O as P,y as h,z as q,r as H,o as g,d as _,e as t,q as m,x as z,N as k,g as y,t as d,F as j,A as B,B as W,P as Z,w as f,j as G,H as Q}from"./index-Cmu6_IW5.js";import{_ as R,a as U,g as X,r as K,b as ee,c as te,d as se,e as le,f as oe}from"./DailyViewSliding-Wsuv_Bz2.js";import"./client-CwkPjKvS.js";import"./program-apE7yaer.js";const ne=t("section",null,[t("div",{class:"w-full sm:container"},[t("div",{class:"border-black border-l-[5px] pl-5"},[t("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"월간 일정")])])],-1),ae={class:"max-w-full mx-auto p-4"},re={class:"flex justify-between items-center mb-4"},ce={class:"inline-flex rounded-lg border border-gray-200 bg-white p-1"},ie=t("span",{class:"text-sm font-medium"}," 주간 ",-1),ue=t("span",{class:"text-sm font-medium"}," 월간 ",-1),de={class:"flex items-center space-x-2"},me={class:"text-xl font-semibold"},he={class:"flex space-x-2 text-sm font-semibold"},fe=t("span",null,"Today",-1),ve=[fe],be={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},pe=W('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),ge=["onClick"],_e=["onClick"],xe=["onClick"],we={class:"inline-block"},ke={class:"ml-auto inline-block"},ye=["onClick"],Ce=t("span",{class:"inline-block"},"상담사",-1),Me={class:"ml-auto inline-block"},De=["onClick"],Se=t("span",{class:"inline-block"},"상담시간",-1),$e={class:"ml-auto inline-block"},Ve=["onClick"],Ye=["onClick"],Ne=["onClick"],je=["onClick"],Le={__name:"MonthlyView",setup(Fe){const u=P({}),C=h(!1),M=h(!1),$=h(""),V=h(""),v=h(""),x=(e,s,n)=>{n.stopPropagation(),u[e]||(u[e]={}),u[e][s]=!u[e][s],Object.keys(u).forEach(l=>{Object.keys(u[l]).forEach(o=>{l!==e&&o!==s&&(u[l][o]=!1)})});const a=n.target.closest(".relative");if(a){const l=a.parentElement.children;for(let o of l)o!==a&&(o.style.display=u[e][s]?"none":"")}},D=()=>{C.value=!C.value,C.value||($.value="",V.value="",v.value=""),b(r.value.currentYear,r.value.currentMonth)},F=()=>{M.value=!M.value,M.value||(v.value=""),b(r.value.currentYear,r.value.currentMonth)},L=e=>{v.value=e,F()},O=e=>{v.value=e,D()},I=(e,s,n)=>{$.value=String(e),V.value=String(s),v.value=n,D()},T=async e=>{if(confirm("해당 일정을 삭제하시겠습니까?")&&e)try{await oe(e),b(r.value.currentYear,r.value.currentMonth)}catch(s){console.error("Error deleting schedule:",s)}},Y=["January","February","March","April","May","June","July","August","September","October","November","December"],N=h([]),r=h({}),S=h(""),A=e=>{const s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${s}-${n}-${a}`};S.value=A(new Date),console.log("today:",S.value);const J=(e,s)=>{const n=new Date(e,s,1),a=n.getFullYear(),l=n.getMonth()+1;let o=a,c=l-1;c===0&&(c=12,o-=1);let w=a,p=l+1;return p===13&&(p=1,w+=1),console.log("currentYear:",a,"currentMonth:",l),{currentDate:n,currentYear:a,currentMonth:l,currentMonthName:Y[l-1],prevYear:o,prevMonth:c,prevMonthName:Y[c-1],nextYear:w,nextMonth:p,nextMonthName:Y[p-1]}},b=async(e,s)=>{e||(e=new Date().getFullYear()),s||(s=new Date().getMonth()+1);try{const n=await X(e,s);N.value=n.data,E(e,s-1),console.log("schedule_data:",N.value)}catch(n){console.error("Error fetching monthly schedule data:",n)}},E=(e,s)=>{r.value=J(e,s)};return q(()=>{const e=new Date().getFullYear(),s=new Date().getMonth();E(e,s),b(r.value.currentYear,r.value.currentMonth)}),(e,s)=>{const n=H("router-link");return g(),_(j,null,[ne,t("div",ae,[t("div",re,[t("div",ce,[m(n,{to:"/admin/weekly",class:k(["inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm text-gray-700 hover:text-gray-900",{"bg-blue-500 text-white":e.$route.path==="/admin/weekly"}])},{default:z(()=>[ie]),_:1},8,["class"]),m(n,{to:"/admin/monthly",class:k(["inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm text-gray-700 hover:text-gray-900",{"bg-blue-500 text-white":e.$route.path==="/admin/monthly"}])},{default:z(()=>[ue]),_:1},8,["class"])]),t("div",de,[t("button",{class:"p-2 rounded-full font-semibold",onClick:s[0]||(s[0]=a=>b(r.value.prevYear,r.value.prevMonth))},[m(y(K),{class:"w-6 h-6"})]),t("h2",me,d(r.value.currentMonthName)+" "+d(r.value.currentYear),1),t("button",{class:"p-2 rounded-full font-semibold",onClick:s[1]||(s[1]=a=>b(r.value.nextYear,r.value.nextMonth))},[m(y(ee),{class:"w-6 h-6"})])]),t("div",he,[t("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:s[2]||(s[2]=a=>b())},ve),t("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:D}," 상담 등록 ")])]),t("div",be,[pe,(g(!0),_(j,null,B(N.value,(a,l)=>(g(),_("div",{class:k(["h-32 p-2",l===S.value?"bg-yellow-100":"bg-white"]),key:l,onClick:o=>O(l)},[t("span",{class:k({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":l===S.value})},d(l.split("-")[2]),3),(g(!0),_(j,null,B(a.slice(0,2),(o,c)=>{var w,p;return g(),_("div",{class:k(["relative flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(w=u[l])!=null&&w[c]?"scale-105 h-auto min-h-6 w-full pt-1":"scale-100 h-6"]]),key:c,style:Z({backgroundColor:(p=u[l])!=null&&p[c]?"rgba(255, 255, 255, 1)":o.teacher_usercolor}),onClick:f(i=>x(l,c,i),["stop"])},[t("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:f(i=>x(l,c,i),["stop"])},[t("span",we,d(o.schedule_time),1),t("span",ke,"["+d(o.client_name)+"] "+d(o.program_name.length>10?o.program_name.slice(0,10)+"...":o.program_name),1)],8,xe),t("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:f(i=>x(l,c,i),["stop"])},[Ce,t("span",Me,d(o.teacher_fullname),1)],8,ye),t("div",{class:"flex justify-between items-center px-1 h-full w-full",onClick:f(i=>x(l,c,i),["stop"])},[Se,t("span",$e,d(o.start_time)+" ~ "+d(o.finish_time),1)],8,De),t("div",{class:"flex justify-center items-center px-1 h-full w-full",onClick:f(i=>x(l,c,i),["stop"])},[t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:f(i=>I(o.schedule_id,o.id,o.schedule_date),["stop"])},[m(y(te),{class:"w-4 h-4"})],8,Ye),t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:f(i=>T(o.id),["stop"])},[m(y(se),{class:"w-4 h-4"})],8,Ne)],8,Ve)],14,_e)}),128)),a.length>2?(g(),_("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:f(o=>L(l),["stop"])},[m(y(le),{class:"w-4 h-4"}),G(" "+d(a.length-2)+" more ",1)],8,je)):Q("",!0)],10,ge))),128))]),m(R,{isVisible:C.value,scheduleId:$.value,scheduleListId:V.value,scheduleDate:v.value,onClose:D,class:"z-20"},null,8,["isVisible","scheduleId","scheduleListId","scheduleDate"]),m(U,{isDailyViewSlidingVisible:M.value,scheduleDate:v.value,onClose:F,onClickCalendarSchedule:I,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64)}}};export{Le as default};
