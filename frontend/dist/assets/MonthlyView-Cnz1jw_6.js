import{N as J,y as u,z as O,o as f,d as p,e as t,q as b,g as _,t as c,F as V,A as I,B as q,M as j,O as H,w as $,j as P,H as W}from"./index-CE9o_E71.js";import{_ as Z,a as G,g as K,r as Q,b as R,c as U,d as X,e as ee,f as te}from"./DailyViewSliding-5OUpk4jh.js";import"./client-DIR5M0oM.js";const se=t("section",null,[t("div",{class:"w-full sm:container"},[t("div",{class:"border-black border-l-[5px] pl-5"},[t("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"월간 일정")])])],-1),le={class:"max-w-full mx-auto p-4"},ne={class:"flex justify-between items-center mb-4"},oe={class:"flex items-center space-x-2"},ae={class:"text-xl font-semibold"},re={class:"flex space-x-2 text-sm font-semibold"},ce=t("span",null,"Today",-1),ie=[ce],ue={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},de=q('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),he=["onClick"],me=["onClick"],ve={class:"flex justify-between items-center px-1 h-full w-full"},be={class:"inline-block"},fe={class:"ml-auto inline-block"},pe={class:"flex justify-between items-center px-1 h-full w-full"},ge=t("span",{class:"inline-block"},"상담사",-1),_e={class:"ml-auto inline-block"},xe={class:"flex justify-between items-center px-1 h-full w-full"},we=t("span",{class:"inline-block"},"상담시간",-1),ye={class:"ml-auto inline-block"},ke={class:"flex justify-center items-center px-1 h-full w-full"},Me=["onClick"],Ce=["onClick"],De=["onClick"],Ne={__name:"MonthlyView",setup(Se){const d=J({}),x=u(!1),w=u(!1),k=u(""),M=u(""),h=u(""),z=(e,s,l)=>{l.stopPropagation(),d[e]||(d[e]={}),d[e][s]=!d[e][s];const o=l.target.closest(".relative");if(o){const n=o.parentElement.children;for(let r of n)r!==o&&(r.style.display=d[e][s]?"none":"")}},y=()=>{x.value=!x.value,x.value||(k.value="",M.value="",h.value=""),m(a.value.currentYear,a.value.currentMonth)},Y=()=>{w.value=!w.value,w.value||(h.value=""),m(a.value.currentYear,a.value.currentMonth)},B=e=>{h.value=e,Y()},E=e=>{h.value=e,y()},N=(e,s,l)=>{k.value=String(e),M.value=String(s),h.value=l,y()},L=async e=>{if(confirm("해당 일정을 삭제하시겠습니까?")&&e)try{await te(e),m(a.value.currentYear,a.value.currentMonth)}catch(s){console.error("Error deleting schedule:",s)}},C=["January","February","March","April","May","June","July","August","September","October","November","December"],D=u([]),a=u({}),S=u(""),T=e=>{const s=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${s}-${l}-${o}`};S.value=T(new Date),console.log("today:",S.value);const A=(e,s)=>{const l=new Date(e,s,1),o=l.getFullYear(),n=l.getMonth()+1;let r=o,v=n-1;v===0&&(v=12,r-=1);let g=o,i=n+1;return i===13&&(i=1,g+=1),console.log("currentYear:",o,"currentMonth:",n),{currentDate:l,currentYear:o,currentMonth:n,currentMonthName:C[n-1],prevYear:r,prevMonth:v,prevMonthName:C[v-1],nextYear:g,nextMonth:i,nextMonthName:C[i-1]}},m=async(e,s)=>{e||(e=new Date().getFullYear()),s||(s=new Date().getMonth()+1);try{const l=await K(e,s);D.value=l.data,F(e,s-1),console.log("schedule_data:",D.value)}catch(l){console.error("Error fetching monthly schedule data:",l)}},F=(e,s)=>{a.value=A(e,s)};return O(()=>{const e=new Date().getFullYear(),s=new Date().getMonth();F(e,s),m(a.value.currentYear,a.value.currentMonth)}),(e,s)=>(f(),p(V,null,[se,t("div",le,[t("div",ne,[t("div",oe,[t("button",{class:"p-2 rounded-full font-semibold",onClick:s[0]||(s[0]=l=>m(a.value.prevYear,a.value.prevMonth))},[b(_(Q),{class:"w-6 h-6"})]),t("h2",ae,c(a.value.currentMonthName)+" "+c(a.value.currentYear),1),t("button",{class:"p-2 rounded-full font-semibold",onClick:s[1]||(s[1]=l=>m(a.value.nextYear,a.value.nextMonth))},[b(_(R),{class:"w-6 h-6"})])]),t("div",re,[t("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:s[2]||(s[2]=l=>m())},ie),t("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:y}," 상담 등록 ")])]),t("div",ue,[de,(f(!0),p(V,null,I(D.value,(l,o)=>(f(),p("div",{class:"bg-white h-32 p-2",key:o,onClick:n=>E(o)},[t("span",{class:j({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":o===S.value})},c(o.split("-")[2]),3),(f(!0),p(V,null,I(l.slice(0,2),(n,r)=>{var v,g;return f(),p("div",{class:j(["relative flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(v=d[o])!=null&&v[r]?"scale-105 h-auto min-h-6 w-full pt-1":"scale-100 h-6"]]),key:r,style:H({backgroundColor:(g=d[o])!=null&&g[r]?"rgba(255, 255, 255, 1)":n.teacher_usercolor}),onClick:i=>z(o,r,i)},[t("div",ve,[t("span",be,"["+c(n.client_name)+"] "+c(n.teacher_expertise),1),t("span",fe,c(n.schedule_time),1)]),t("div",pe,[ge,t("span",_e,c(n.teacher_fullname),1)]),t("div",xe,[we,t("span",ye,c(n.start_time)+" ~ "+c(n.finish_time),1)]),t("div",ke,[t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:$(i=>N(n.schedule_id,n.id,n.schedule_date),["stop"])},[b(_(U),{class:"w-4 h-4"})],8,Me),t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:$(i=>L(n.id),["stop"])},[b(_(X),{class:"w-4 h-4"})],8,Ce)])],14,me)}),128)),l.length>2?(f(),p("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:$(n=>B(o),["stop"])},[b(_(ee),{class:"w-4 h-4"}),P(" "+c(l.length-2)+" more ",1)],8,De)):W("",!0)],8,he))),128))]),b(Z,{isVisible:x.value,scheduleId:k.value,scheduleListId:M.value,scheduleDate:h.value,onClose:y,class:"z-20"},null,8,["isVisible","scheduleId","scheduleListId","scheduleDate"]),b(G,{isDailyViewSlidingVisible:w.value,scheduleDate:h.value,onClose:Y,onClickCalendarSchedule:N,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64))}};export{Ne as default};
