import{u as z,i as C,c as M,a as u,l as S,M as q,s as j,O as B,o as k,d as w,e,J as U,n as a,p as F,g as l,A as n,E as f,B as E,F as $,q as g,f as P,v as N,P as O,j as R,x as D,t as x}from"./index-CE53uhnG.js";import{a as A,u as K,d as I}from"./user-BfN4M55-.js";import{_ as L}from"./PaginationView-DCcyaCzD.js";import{r as T}from"./CheckIcon-vfKc0KF8.js";const J={className:"w-full bg-neutral-50 shadow-lg rounded-lg p-6"},Q={className:"border-b pb-2 mb-4"},Z=e("h2",{class:"font-title font-bold"},"상담사 정보",-1),G=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),H=[G],W={class:"grid grid-cols-2 gap-4"},X={class:"mb-4"},Y=e("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"상담사ID",-1),ee={class:"grid grid-cols-2 gap-4"},se={class:"mb-4"},te=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"비밀번호",-1),re={class:"mb-4"},oe=e("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"비밀번호 확인",-1),ae={class:"grid grid-cols-1 gap-4"},le={class:"mb-4"},de=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"이메일",-1),ne={class:"grid grid-cols-2 gap-4"},ie={class:"mb-4"},ue=e("label",{for:"full_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"상담사명",-1),ce={class:"mb-4"},me=e("label",{for:"birth_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"생년월일",-1),be={class:"grid grid-cols-2 gap-4"},ge={class:"mb-4"},pe=e("label",{for:"center_username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"센터ID",-1),he={class:"mb-4"},ye=e("label",{for:"phone_number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"전화번호",-1),xe={class:"grid grid-cols-2 gap-4"},_e={class:"mb-4"},fe=e("label",{for:"hp_number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"휴대폰번호",-1),ke={class:"mb-4"},we=e("label",{for:"zip_code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"우편번호",-1),ve={class:"mb-4"},Ve=e("label",{for:"address",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"주소",-1),$e={class:"mb-4"},Ue=e("label",{for:"address_extra",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"주소 상세",-1),Ie={class:"grid grid-cols-3 gap-4 justify-stretch"},Ce={class:"mb-4"},je=e("label",{for:"user_type",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"상담자 타입",-1),ze={class:"mb-4 flex items-center pt-4"},Me=e("label",{for:"is_active",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mr-2"},"정상",-1),Se={class:"mb-4 flex items-center pt-4"},qe=e("label",{for:"is_superuser",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"최고관리자",-1),Be=e("button",{type:"submit",class:"bg-green-600 text-white rounded-md p-2 w-[80px]"}," 확인 ",-1),Fe={__name:"UserFormSliding",props:{isVisible:Boolean,userId:String},emits:["close"],setup(p,{emit:c}){const d=z(),i=p,m=C("showModal"),h=c,_=M({username:u().min(8,"8자 이상 입력해주세요.").required("아이디를 입력해주세요."),password:u(),password_confirm:u().when("password",{is:r=>r&&r.length>0,then:()=>u().oneOf([S("password")],"비밀번호가 일치하지 않습니다.").required("비밀번호 확인을 입력해주세요."),otherwise:()=>u().notRequired()}),email:u().required("이메일을 입력해주세요.").email("올바른 이메일을 입력하세요."),full_name:u().required("이름을 입력해주세요."),hp_number:u().required("휴대폰번호를 입력해주세요.").test("is-valid-phone","올바른 휴대폰번호를 입력하세요.",r=>/^(010|011)-\d{3,4}-\d{4}$/.test(r)),phone_number:u().required("전화번호를 입력해주세요.").test("is-valid-phone","올바른 전화번호를 입력하세요.",r=>/^\d{2,3}-\d{3,4}-\d{4}$/.test(r))}),t=q({username:d.user.username,password:"",email:d.user.email,full_name:d.user.full_name,birth_date:d.user.birth_date,center_username:d.user.center_username,phone_number:d.user.phone_number,hp_number:d.user.hp_number,address:d.user.address,address_extra:d.user.address_extra,zip_code:d.user.zip_code,user_type:d.user.user_type,is_active:d.user.is_active,is_superuser:d.user.is_superuser}),b=()=>{h("close")},y=async()=>{if(!i.userId){Object.keys(t).forEach(r=>{t[r]=""});return}console.log("props.userId: ",i.userId);try{const r=await A(i.userId);console.log("userInfo:",r),Object.assign(t,r)}catch(r){console.error("Error fetching user:",r)}},v=async()=>{try{await K(i.userId,t),m("내담자 정보가 등록되었습니다.")}catch(r){m("내담자 정보 등록 중 오류가 발생했습니다."),console.error("Error registering client data:",r)}};j(()=>{y(),console.log("userStore.user.center_username 1111: ",d.user.center_username)});const V=async r=>{console.log("submitting:",r),Object.assign(t,r),await v(),h("close")};return B(()=>i.userId,(r,s)=>{r!==s&&y()}),(r,s)=>(k(),w($,null,[e("div",{onClick:b,class:U(["fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-1000",{"opacity-100 block":p.isVisible,"opacity-0 hidden":!p.isVisible}])},null,2),e("div",{class:U(["fixed top-0 right-0 w-1/3 h-full bg-white shadow-lg p-4 overflow-auto z-50 transition-transform duration-1000 ease-in-out",{"translate-x-full":!p.isVisible,"translate-x-0":p.isVisible}])},[e("div",J,[e("div",Q,[e("div",{class:"flex items-center justify-evenly mb-2"},[Z,e("button",{class:"ml-auto",onClick:b},H)]),a(l(E),{onSubmit:V,"validation-schema":l(_),"initial-values":t,class:"space-y-4 text-sm"},{default:F(()=>[e("div",W,[e("div",X,[Y,a(l(n),{type:"text",name:"username",modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=o=>t.username=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(l(f),{name:"username",class:"text-red-500 text-xs italic mt-2"})])]),e("div",ee,[e("div",se,[te,a(l(n),{type:"password",name:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"})]),e("div",re,[oe,a(l(n),{type:"password",name:"password_confirm",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"})])]),e("div",ae,[e("div",le,[de,a(l(n),{type:"email",name:"email",modelValue:t.email,"onUpdate:modelValue":s[1]||(s[1]=o=>t.email=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(l(f),{name:"email",class:"text-red-500 text-xs italic mt-2"})])]),e("div",ne,[e("div",ie,[ue,a(l(n),{type:"text",name:"full_name",modelValue:t.full_name,"onUpdate:modelValue":s[2]||(s[2]=o=>t.full_name=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(l(f),{name:"full_name",class:"text-red-500 text-xs italic mt-2"})]),e("div",ce,[me,a(l(n),{type:"date",name:"birth_date",modelValue:t.birth_date,"onUpdate:modelValue":s[3]||(s[3]=o=>t.birth_date=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])])]),e("div",be,[e("div",ge,[pe,a(l(n),{type:"text",name:"center_username",modelValue:t.center_username,"onUpdate:modelValue":s[4]||(s[4]=o=>t.center_username=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])]),e("div",he,[ye,a(l(n),{type:"text",name:"phone_number",modelValue:t.phone_number,"onUpdate:modelValue":s[5]||(s[5]=o=>t.phone_number=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(l(f),{name:"phone_number",class:"text-red-500 text-xs italic mt-2"})])]),e("div",xe,[e("div",_e,[fe,a(l(n),{type:"text",name:"hp_number",modelValue:t.hp_number,"onUpdate:modelValue":s[6]||(s[6]=o=>t.hp_number=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"]),a(l(f),{name:"hp_number",class:"text-red-500 text-xs italic mt-2"})]),e("div",ke,[we,a(l(n),{type:"text",name:"zip_code",modelValue:t.zip_code,"onUpdate:modelValue":s[7]||(s[7]=o=>t.zip_code=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])])]),e("div",ve,[Ve,a(l(n),{type:"text",name:"address",modelValue:t.address,"onUpdate:modelValue":s[8]||(s[8]=o=>t.address=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])]),e("div",$e,[Ue,a(l(n),{type:"text",name:"address_extra",modelValue:t.address_extra,"onUpdate:modelValue":s[9]||(s[9]=o=>t.address_extra=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])]),e("div",Ie,[e("div",Ce,[je,a(l(n),{type:"text",name:"user_type",modelValue:t.user_type,"onUpdate:modelValue":s[10]||(s[10]=o=>t.user_type=o),class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"},null,8,["modelValue"])]),e("div",ze,[Me,a(l(n),{type:"checkbox",name:"is_active",modelValue:t.is_active,"onUpdate:modelValue":s[11]||(s[11]=o=>t.is_active=o),class:"mt-1 block"},null,8,["modelValue"])]),e("div",Se,[qe,a(l(n),{type:"checkbox",name:"is_superuser",modelValue:t.is_superuser,"onUpdate:modelValue":s[12]||(s[12]=o=>t.is_superuser=o),class:"mt-1 block"},null,8,["modelValue"])])]),e("div",{class:"flex justify-between mt-4"},[e("button",{type:"button",onClick:b,class:"bg-gray-400 text-white rounded-md p-2 w-[80px]"}," 취소 "),Be])]),_:1},8,["validation-schema","initial-values"])])])],2)],64))}},Ee=e("section",null,[e("div",{class:"w-full sm:container"},[e("div",{class:"border-black border-l-[5px] pl-5"},[e("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"상담자 관리")])])],-1),Pe={class:"lg:flex lg:items-center lg:justify-between mb-2"},Ne={class:"min-w-0 flex-1"},Oe={class:"relative"},Re=e("div",{class:"absolute inset-y-0 rtl:inset-r-0 start-0 flex items-center ps-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1),De={class:"mt-5 flex lg:ml-4 lg:mt-0"},Ae={class:"sm:ml-3"},Ke={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Le={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},Te=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"아이디"),e("th",{scope:"col",class:"px-6 py-3"},"상담사명"),e("th",{scope:"col",class:"px-6 py-3"},"이메일"),e("th",{scope:"col",class:"px-6 py-3"},"센터명"),e("th",{scope:"col",class:"px-6 py-3"},"휴대폰번호"),e("th",{scope:"col",class:"px-6 py-3"},"전화번호"),e("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),Je={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Qe={class:"px-6 py-4"},Ze={class:"px-6 py-4"},Ge={class:"px-6 py-4"},He={class:"px-6 py-4"},We={class:"px-6 py-4"},Xe={class:"px-6 py-4"},Ye=["onClick"],as={__name:"UserList",setup(p){C("showModal");const c=g(1),d=g(10),i=g(0),m=g(!1),h=g(""),_=g(""),t=g([]),b=r=>{h.value=String(r),m.value=!m.value,m.value||(h.value="",y(c.value))},y=async r=>{const s=await I(r);t.value=s.items,c.value=s.page,d.value=s.size,i.value=s.total},v=async()=>{try{const r=await I(1,10,_.value);t.value=r.items,c.value=r.page,d.value=r.size,i.value=r.total}catch(r){console.error("Error fetching users:",r)}},V=r=>{y(r),c.value=r};return j(y),(r,s)=>(k(),w($,null,[Ee,e("div",Pe,[e("div",Ne,[e("div",Oe,[Re,P(e("input",{type:"text",id:"table-search-users",name:"search-text","onUpdate:modelValue":s[0]||(s[0]=o=>_.value=o),class:"block pt-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"상담사 검색",onKeyup:O(v,["enter"])},null,544),[[N,_.value]])])]),e("div",De,[e("span",Ae,[e("button",{type:"button",onClick:b,class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[a(l(T),{class:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),R(" 상담사 등록 ")])])])]),e("div",Ke,[e("table",Le,[Te,e("tbody",null,[(k(!0),w($,null,D(t.value,o=>(k(),w("tr",{key:o.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("th",Je,x(o.username),1),e("td",Qe,x(o.full_name),1),e("td",Ze,x(o.email),1),e("td",Ge,x(o.center_username),1),e("td",He,x(o.hp_number),1),e("td",We,x(o.phone_number),1),e("td",Xe,[e("a",{href:"#",onClick:es=>b(o.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"상담자정보",8,Ye)])]))),128))])]),a(L,{"total-items":i.value,"current-page":c.value,"items-per-page":d.value,onPageChanged:V},null,8,["total-items","current-page","items-per-page"]),a(Fe,{isVisible:m.value,userId:h.value,onClose:b},null,8,["isVisible","userId"])])],64))}};export{as as default};
