import{N as U,y as f,z as X,o as d,d as u,e as l,w as V,q as w,g,t as c,F as p,A as _,h as A,M as q,H as I}from"./index-DRfNb0Qr.js";import{_ as ee,a as te,g as se,r as le,b as ae,c as oe,d as ne}from"./DailyViewSliding-C4-2dvgD.js";import"./client-_9q7Vsbu.js";const re=l("section",null,[l("div",{class:"w-full sm:container"},[l("div",{class:"border-black border-l-[5px] pl-5"},[l("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"주간 일정")])])],-1),ce={class:"flex justify-between items-center mb-4"},ie={class:"flex items-center space-x-2"},de={class:"text-xl font-semibold"},ue={class:"flex space-x-2 text-sm font-semibold"},be=l("span",null,"Today",-1),he=[be],ve=l("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md"},"상담 등록",-1),fe={class:"not-prose relative bg-slate-50 rounded-xl overflow-hidden w-full mx-auto dark:bg-slate-800/25"},ge={class:"relative rounded-xl overflow-auto"},ke={class:"mx-4 my-4 box-content bg-white dark:bg-slate-800 shadow-xl overflow-hidden"},De={class:"grid grid-cols-[70px,repeat(7,1fr)] grid-rows-1 h-auto"},we=l("div",{class:"row-start-[1] col-start-[1] sticky top-0 bg-white dark:bg-gradient-to-b dark:from-slate-600 dark:to-slate-700 border-slate-100 dark:border-black/10 bg-clip-padding text-slate-900 dark:text-slate-200 border-b text-sm font-medium py-2"},null,-1),pe={class:"sm:inline-block rounded-full bg-slate-400 w-5 h-5 text-white font-semibold"},me={class:"grid grid-cols-[70px,repeat(7,1fr)] grid-rows-1 max-h-full h-full"},_e={class:"flex-row h-full"},xe=["onClick"],ye=["onClick"],Se={class:"inline-block"},Ce={class:"ml-auto inline-block"},Ve={class:"flex justify-between items-center px-1 h-full w-full"},$e=l("span",{class:"inline-block"},"상담사",-1),Me={class:"ml-auto inline-block"},Te={class:"flex justify-between items-center px-1 h-full w-full"},Fe=l("span",{class:"inline-block"},"상담시간",-1),Ee={class:"ml-auto inline-block"},Ye={class:"flex justify-center items-center px-1 h-full w-full"},Ne=["onClick"],We=["onClick"],je=l("div",{class:"absolute inset-0 pointer-events-none border border-black/5 rounded-xl dark:border-white/5"},null,-1),qe={__name:"WeeklyView",setup(ze){const b=U({}),x=f(!1),y=f(!1),$=f(""),h=f(""),k=f(""),M=f([]),o=f({}),T=new Date,L=["Mon","Tue","Web","Thu","Fri","Sat","Sun"],O=(e,t,s,a)=>{a.stopPropagation(),b[e]||(b[e]={}),b[e][t]||(b[e][t]={}),b[e][t][s]=!b[e][t][s]};function P(e){return e<10?`0${e}:00`:`${e}:00`}const S=e=>{const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`},Z=e=>{const t=[];for(let s=0;s<7;s++){const a=new Date(e);a.setDate(e.getDate()+s);const i=a.getDay()-1;t.push({date:S(a),day:L[i===-1?6:i]})}return t},F=()=>{x.value=!x.value,x.value||($.value="",h.value="",k.value="",D(o.value.currentYear,o.value.currentMonth,o.value.currentDay))},E=()=>{y.value=!y.value,y.value||(h.value="",k.value="",D(o.value.currentYear,o.value.currentMonth,o.value.currentDay))},G=e=>{h.value=e,E()},J=(e,t)=>{console.log("clickCalendarTime:",e,t),h.value=e,k.value=t,F()},Y=(e,t)=>{$.value=e,h.value=t,F()},D=async(e,t,s)=>{e=e||new Date().getFullYear(),t=t||new Date().getMonth()+1,s=s||new Date().getDate(),console.log("year:",e,"month:",t,"day:",s);try{const a=await se(e,t,s);M.value=a.data,C(e,t-1,s),console.log("schedule_data:",M.value)}catch(a){console.error("Error fetching monthly schedule data:",a)}},K=(e,t,s)=>{const a=new Date(e,t,s);console.log("date:",a);let i=a.getDay();i=i===0?6:i-1;const r=new Date(a);r.setDate(a.getDate()-i);const n=new Date(r);n.setDate(r.getDate()+6);const v=new Date(r);v.setDate(r.getDate()-1);const m=new Date(n);return m.setDate(n.getDate()+1),{currentYear:e,currentMonth:t+1,currentDay:s,weekStartDate:r,weekEndDate:n,prevStartDate:v,nextEndDate:m}},Q=()=>{const e=o.value.prevStartDate.getFullYear(),t=o.value.prevStartDate.getMonth()+1,s=o.value.prevStartDate.getDate();C(e,t,s),D(e,t,s)},R=()=>{const e=o.value.nextEndDate.getFullYear(),t=o.value.nextEndDate.getMonth()+1,s=o.value.nextEndDate.getDate();C(e,t,s),D(e,t,s)},C=(e,t,s)=>{o.value=K(e,t,s),o.value.weekDates=Z(o.value.weekStartDate),console.log("set Date Info - currentDateInfo:",o.value)};return X(()=>{h.value=S(new Date),k.value=P(new Date().getHours());const e=new Date().getFullYear(),t=new Date().getMonth()+1,s=new Date().getDate();C(e,t,s),D(e,t,s)}),(e,t)=>(d(),u(p,null,[re,l("div",ce,[l("div",ie,[l("button",{onClick:t[0]||(t[0]=V(s=>Q(),["stop"])),class:"p-2 rounded-full font-semibold"},[w(g(le),{class:"w-6 h-6"})]),l("h2",de,c(S(o.value.weekStartDate))+" ~ "+c(S(o.value.weekEndDate)),1),l("button",{onClick:t[1]||(t[1]=V(s=>R(),["stop"])),class:"p-2 rounded-full font-semibold"},[w(g(ae),{class:"w-6 h-6"})])]),l("div",ue,[l("button",{onClick:t[2]||(t[2]=s=>D(g(T).getFullYear(),g(T).getMonth()+1,g(T).getDate())),class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center"},he),ve])]),l("div",fe,[l("div",ge,[l("div",ke,[l("div",De,[we,(d(!0),u(p,null,_(o.value.weekDates,(s,a)=>(d(),u("div",{key:a,class:"row-start-[1] col-start-[{{ index + 2 }}] sticky top-0 bg-white dark:bg-gradient-to-b dark:from-slate-600 dark:to-slate-700 border-slate-100 dark:border-black/10 bg-clip-padding text-slate-900 dark:text-slate-200 border-b text-sm font-medium py-2 text-center"},[l("span",pe,c(s.date.split("-")[2]),1),A(" "+c(s.day),1)]))),128))]),l("div",me,[l("div",_e,[(d(),u(p,null,_(11,s=>l("div",{key:s,class:"h-[90px] border-slate-100 dark:border-slate-200/5 border-r text-xs p-1.5 text-right text-slate-400 uppercase sticky left-0 bg-white dark:bg-slate-800 font-medium"},c(s+7)+" AM ",1)),64))]),(d(!0),u(p,null,_(M.value,(s,a)=>(d(),u("div",{key:a,class:"flex-row h-full items-center text-center border-slate-100 dark:border-slate-200/5 border-r divide-y divide-slate-100 dark:divide-slate-200"},[(d(!0),u(p,null,_(s,(i,r)=>(d(),u("div",{key:r,onClick:n=>J(a,r),class:"h-[90px] text-xs text-slate-400 font-medium p-1.5"},[(d(!0),u(p,null,_(i.slice(0,2),(n,v)=>{var m,N,W,j,z,B;return d(),u("div",{class:q(["flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(N=(m=b[a])==null?void 0:m[r])!=null&&N[v]?"scale-105 h-auto min-h-6 w-full pt-1 border-blue-700":"scale-100 h-6",(j=(W=b[a])==null?void 0:W[r])!=null&&j[v]?"bg-white/100":n.teacher_usercolor]]),key:v,onClick:H=>O(a,r,v,H)},[l("div",{class:q(["flex justify-between items-center px-1 h-full w-full",(B=(z=b[a])==null?void 0:z[r])!=null&&B[v]?"bg-white/100":n.teacher_usercolor])},[l("span",Se,"["+c(n.client_name)+"] "+c(n.teacher_expertise),1),l("span",Ce,c(n.schedule_time),1)],2),l("div",Ve,[$e,l("span",Me,c(n.teacher_fullname),1)]),l("div",Te,[Fe,l("span",Ee,c(n.start_time)+" ~ "+c(n.finish_time),1)]),l("div",Ye,[l("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:V(H=>Y(n.schedule_id,n.schedule_date),["stop"])},[w(g(oe),{class:"w-4 h-4"})],8,Ne)])],10,ye)}),128)),i.length>2?(d(),u("div",{key:0,class:"flex items-center justify-center ml-auto w-6 h-5 text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 bg-blue-400/20",onClick:V(n=>G(a),["stop"])},[w(g(ne),{class:"w-5 h-4"}),A(" "+c(i.length-2),1)],8,We)):I("",!0)],8,xe))),128))]))),128))])])]),je,w(ee,{isVisible:x.value,scheduleId:$.value,scheduleDate:h.value,scheduleTime:k.value,onClose:F,class:"z-20"},null,8,["isVisible","scheduleId","scheduleDate","scheduleTime"]),w(te,{isDailyViewSlidingVisible:y.value,scheduleDate:h.value,scheduleTime:k.value,onClose:E,onClickCalendarSchedule:Y,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate","scheduleTime"])])],64))}};export{qe as default};
