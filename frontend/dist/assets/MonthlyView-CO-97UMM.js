import{N as E,y as i,z as J,o as f,d as p,e as t,q as v,g as x,t as r,F as V,A as F,B as O,M as I,O as q,w as H,j as P,H as W}from"./index-B3wxABeO.js";import{_ as Z,a as G,g as K,r as Q,b as R,c as U,d as X,e as ee,f as te}from"./DailyViewSliding-BtwTgSR3.js";import"./client-B4fmRRBY.js";const se=t("section",null,[t("div",{class:"w-full sm:container"},[t("div",{class:"border-black border-l-[5px] pl-5"},[t("h2",{class:"text-dark mb-2 text-2xl font-semibold dark:text-white"},"월간 일정")])])],-1),le={class:"max-w-full mx-auto p-4"},ne={class:"flex justify-between items-center mb-4"},oe={class:"flex items-center space-x-2"},ae={class:"text-xl font-semibold"},re={class:"flex space-x-2 text-sm font-semibold"},ce=t("span",null,"Today",-1),ie=[ce],ue={class:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden text-sm"},de=O('<div class="bg-white py-2 text-center text-sm font-medium">Mon</div><div class="bg-white py-2 text-center text-sm font-medium">Tue</div><div class="bg-white py-2 text-center text-sm font-medium">Wed</div><div class="bg-white py-2 text-center text-sm font-medium">Thu</div><div class="bg-white py-2 text-center text-sm font-medium">Fri</div><div class="bg-white py-2 text-center text-sm font-medium">Sat</div><div class="bg-white py-2 text-center text-sm font-medium">Sun</div>',7),he=["onClick"],me=["onClick"],ve={class:"flex justify-between items-center px-1 h-full w-full"},be={class:"inline-block"},fe={class:"ml-auto inline-block"},pe={class:"flex justify-between items-center px-1 h-full w-full"},ge=t("span",{class:"inline-block"},"상담사",-1),xe={class:"ml-auto inline-block"},_e={class:"flex justify-between items-center px-1 h-full w-full"},we=t("span",{class:"inline-block"},"상담시간",-1),ke={class:"ml-auto inline-block"},ye={class:"flex justify-center items-center px-1 h-full w-full"},Me=["onClick"],Ce=["onClick"],De=["onClick"],Ne={__name:"MonthlyView",setup(Se){const b=E({}),_=i(!1),w=i(!1),y=i(""),M=i(""),u=i(""),j=(e,s,l)=>{l.stopPropagation(),b[e]||(b[e]={}),b[e][s]=!b[e][s]},k=()=>{_.value=!_.value,_.value||(y.value="",M.value="",u.value=""),d(o.value.currentYear,o.value.currentMonth)},$=()=>{w.value=!w.value,w.value||(u.value=""),d(o.value.currentYear,o.value.currentMonth)},z=e=>{u.value=e,$()},B=e=>{u.value=e,k()},Y=(e,s,l)=>{y.value=String(e),M.value=String(s),u.value=l,k()},L=async e=>{if(confirm("해당 일정을 삭제하시겠습니까?")&&e)try{await te(e),d(o.value.currentYear,o.value.currentMonth)}catch(s){console.error("Error deleting schedule:",s)}},C=["January","February","March","April","May","June","July","August","September","October","November","December"],D=i([]),o=i({}),S=i(""),T=e=>{const s=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${s}-${l}-${a}`};S.value=T(new Date),console.log("today:",S.value);const A=(e,s)=>{const l=new Date(e,s,1),a=l.getFullYear(),n=l.getMonth()+1;let h=a,m=n-1;m===0&&(m=12,h-=1);let g=a,c=n+1;return c===13&&(c=1,g+=1),console.log("currentYear:",a,"currentMonth:",n),{currentDate:l,currentYear:a,currentMonth:n,currentMonthName:C[n-1],prevYear:h,prevMonth:m,prevMonthName:C[m-1],nextYear:g,nextMonth:c,nextMonthName:C[c-1]}},d=async(e,s)=>{e||(e=new Date().getFullYear()),s||(s=new Date().getMonth()+1);try{const l=await K(e,s);D.value=l.data,N(e,s-1),console.log("schedule_data:",D.value)}catch(l){console.error("Error fetching monthly schedule data:",l)}},N=(e,s)=>{o.value=A(e,s)};return J(()=>{const e=new Date().getFullYear(),s=new Date().getMonth();N(e,s),d(o.value.currentYear,o.value.currentMonth)}),(e,s)=>(f(),p(V,null,[se,t("div",le,[t("div",ne,[t("div",oe,[t("button",{class:"p-2 rounded-full font-semibold",onClick:s[0]||(s[0]=l=>d(o.value.prevYear,o.value.prevMonth))},[v(x(Q),{class:"w-6 h-6"})]),t("h2",ae,r(o.value.currentMonthName)+" "+r(o.value.currentYear),1),t("button",{class:"p-2 rounded-full font-semibold",onClick:s[1]||(s[1]=l=>d(o.value.nextYear,o.value.nextMonth))},[v(x(R),{class:"w-6 h-6"})])]),t("div",re,[t("button",{class:"px-4 py-2 bg-white border border-gray-300 rounded-md flex items-center",onClick:s[2]||(s[2]=l=>d())},ie),t("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-md",onClick:k}," 상담 등록 ")])]),t("div",ue,[de,(f(!0),p(V,null,F(D.value,(l,a)=>(f(),p("div",{class:"bg-white h-32 p-2",key:a,onClick:n=>B(a)},[t("span",{class:I({"block text-sm bg-sky-500 text-white ring rounded-full font-semibold w-5 text-center":a===S.value})},r(a.split("-")[2]),3),(f(!0),p(V,null,F(l.slice(0,2),(n,h)=>{var m,g;return f(),p("div",{class:I(["flex-row text-xs text-blue-600 border border-blue-700/40 rounded-md m-1 space-y-1",["transform transition duration-500 ease-in-out overflow-hidden",(m=b[a])!=null&&m[h]?"scale-105 h-auto min-h-6 w-full pt-1":"scale-100 h-6"]]),key:h,style:q({backgroundColor:(g=b[a])!=null&&g[h]?"rgba(255, 255, 255, 1)":n.teacher_usercolor}),onClick:c=>j(a,h,c)},[t("div",ve,[t("span",be,"["+r(n.client_name)+"] "+r(n.teacher_expertise),1),t("span",fe,r(n.schedule_time),1)]),t("div",pe,[ge,t("span",xe,r(n.teacher_fullname),1)]),t("div",_e,[we,t("span",ke,r(n.start_time)+" ~ "+r(n.finish_time),1)]),t("div",ye,[t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:c=>Y(n.schedule_id,n.id,n.schedule_date)},[v(x(U),{class:"w-4 h-4"})],8,Me),t("button",{class:"text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:c=>L(n.id)},[v(x(X),{class:"w-4 h-4"})],8,Ce)])],14,me)}),128)),l.length>2?(f(),p("div",{key:0,class:"mt-4 flex items-center justify-center text-xs text-blue-600 border border-blue-700/10 rounded-md m-1 p-0.5 bg-blue-400/20",onClick:H(n=>z(a),["stop"])},[v(x(ee),{class:"w-4 h-4"}),P(" "+r(l.length-2)+" more ",1)],8,De)):W("",!0)],8,he))),128))]),v(Z,{isVisible:_.value,scheduleId:y.value,scheduleListId:M.value,scheduleDate:u.value,onClose:k,class:"z-20"},null,8,["isVisible","scheduleId","scheduleListId","scheduleDate"]),v(G,{isDailyViewSlidingVisible:w.value,scheduleDate:u.value,onClose:$,onClickCalendarSchedule:Y,class:"z-10"},null,8,["isDailyViewSlidingVisible","scheduleDate"])])],64))}};export{Ne as default};
